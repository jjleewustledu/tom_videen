head	1.25;
access;
symbols;
locks; strict;
comment	@ * @;


1.25
date	95.11.27.20.46.02;	author ty7777;	state Exp;
branches;
next	1.24;

1.24
date	95.06.27.16.42.07;	author ty7777;	state Exp;
branches;
next	1.23;

1.23
date	95.02.08.18.15.56;	author ty7777;	state Exp;
branches;
next	1.22;

1.22
date	94.12.22.20.10.03;	author ty7777;	state Exp;
branches;
next	1.21;

1.21
date	94.11.02.15.31.31;	author ty7777;	state Exp;
branches;
next	1.20;

1.20
date	94.11.01.20.39.18;	author ty7777;	state Exp;
branches;
next	1.19;

1.19
date	94.09.20.16.01.40;	author ty7777;	state Exp;
branches;
next	1.18;

1.18
date	94.09.02.21.28.45;	author ty7777;	state Exp;
branches;
next	1.17;

1.17
date	94.09.02.19.00.48;	author ty7777;	state Exp;
branches;
next	1.16;

1.16
date	94.09.01.21.04.37;	author ty7777;	state Exp;
branches;
next	1.15;

1.15
date	93.12.20.21.27.28;	author ty7777;	state Exp;
branches;
next	1.14;

1.14
date	93.10.06.19.01.37;	author ty7777;	state Exp;
branches;
next	1.13;

1.13
date	93.09.14.16.18.05;	author ty7777;	state Exp;
branches;
next	1.12;

1.12
date	93.09.10.14.48.56;	author ty7777;	state Exp;
branches;
next	1.11;

1.11
date	93.09.09.20.22.43;	author ty7777;	state Exp;
branches;
next	1.10;

1.10
date	93.05.06.14.55.52;	author ty7777;	state Exp;
branches;
next	1.9;

1.9
date	93.04.28.21.15.56;	author ty7777;	state Exp;
branches;
next	1.8;

1.8
date	93.04.21.16.35.21;	author ty7777;	state Exp;
branches;
next	1.7;

1.7
date	93.02.19.16.50.57;	author ty7777;	state Exp;
branches;
next	1.6;

1.6
date	93.02.17.20.41.46;	author ty7777;	state Exp;
branches;
next	1.5;

1.5
date	93.02.15.20.35.36;	author ty7777;	state Exp;
branches;
next	1.4;

1.4
date	93.02.09.18.23.32;	author ty7777;	state Exp;
branches;
next	1.3;

1.3
date	93.01.27.22.07.40;	author ty7777;	state Exp;
branches;
next	1.2;

1.2
date	93.01.27.20.44.52;	author ty7777;	state Exp;
branches;
next	1.1;

1.1
date	93.01.26.21.01.10;	author ty7777;	state Exp;
branches;
next	;


desc
@xray.h initial checking in.
@


1.25
log
@Added constant for 953B offset set on October 19, 1995.
@
text
@/*$Id: xray.h,v 1.24 1995/06/27 16:42:07 ty7777 Exp ty7777 $*/
/*$Log: xray.h,v $
 * Revision 1.24  1995/06/27  16:42:07  ty7777
 * Added the HR961 offset.
 *
 * Revision 1.23  1995/02/08  18:15:56  ty7777
 * Added FIRST_SCAN_AFTER_OCT94.
 *
 * Revision 1.22  1994/12/22  20:10:03  ty7777
 * Updated to regenerate PETT6 .sxr files.
 *
 * Revision 1.21  1994/11/02  15:31:31  ty7777
 * After making new ecat offset work.
 *
 * Revision 1.20  1994/11/01  20:39:18  ty7777
 * Added ECAT_MAG_FACTOR_AFTER_OCT.
 *
 * Revision 1.19  1994/09/20  16:01:40  ty7777
 * Updated for peakslice processing.
 *
 * Revision 1.18  1994/09/02  21:28:45  ty7777
 * Added ACPC_FONT.
 *
 * Revision 1.17  1994/09/02  19:00:48  ty7777
 * Update to incorporated new algorithm for setting the reference slice.
 *
 * Revision 1.16  1994/09/01  21:04:37  ty7777
 * Updated for new algorithm.
 *
 * Revision 1.15  1993/12/20  21:27:28  ty7777
 * Added recompute to GRAPHICS_DATA.
 *
 * Revision 1.14  1993/10/06  19:01:37  ty7777
 * more ENCODED_NUM_SLICES to petutil.h.
 *
 * Revision 1.13  1993/09/14  16:18:05  ty7777
 * Some constants are moved to petutil.h.
 *
 * Revision 1.12  1993/09/10  14:48:56  ty7777
 * Move TYPE to XRAY_TYPE in /usr/local/include/petutil/petutil.h.
 *
 * Revision 1.11  1993/09/09  20:22:43  ty7777
 * Moved DAY, MONTH, YEAR to /usr/local/include/petutil/petutil.h.
 *
 * Revision 1.10  1993/05/06  14:55:52  ty7777
 * Before making print work.
 *
 * Revision 1.9  1993/04/28  21:15:56  ty7777
 * Move TRANSMISSION_ECAT, EMISSION_ECAT, etc to /usr/local/include/petutil/petutil.h.
 *
 * Revision 1.8  1993/04/21  16:35:21  ty7777
 * Moved SXR_OUTPUT to petutil.h.
 *
 * Revision 1.7  1993/02/19  16:50:57  ty7777
 * Before adding film position, scan position, and offset.
 *
 * Revision 1.6  1993/02/17  20:41:46  ty7777
 * Before changing xray slices lengths computation order.
 *
 * Revision 1.5  1993/02/15  20:35:36  ty7777
 * Before adding lines for xray slice lines.
 *
 * Revision 1.4  1993/02/09  18:23:32  ty7777
 * Release checking in.
 *
 * Revision 1.3  1993/01/27  22:07:40  ty7777
 * Adding trim, encoded, etc to xray.h.
 *
 * Revision 1.2  1993/01/27  20:44:52  ty7777
 * After adding PET image width and skull X ray width.
 *
 * Revision 1.1  1993/01/26  21:01:10  ty7777
 * Initial revision
 **/

/*____________________________________________________________________________	
	xray.h

	Description:
		Header file for xray. Includes description of X ray data, constants,
		and global variables. Also includes necessary X and application 
		headers. 

	Author:
		Tom Yang 
		11/16/92

	History:
		Created by TY 11/16/92.
_____________________________________________________________________________*/	

#ifndef _XRAY_H_INCLUDED
#define _XRAY_H_INCLUDED

#include <Xm/Xm.h>
#include <Xm/DialogS.h>
#include <Xm/MainW.h>
#include <Xm/DrawingA.h>
#include <Xm/SelectioB.h>
#include <Xm/FileSB.h>
#include <Xm/Frame.h>
#include <Xm/Form.h>
#include <Xm/Label.h>
#include <Xm/Separator.h>
#include <Xm/Text.h>
#include <Xm/PushB.h>
#include <Xm/RowColumn.h>
#include <Xm/MessageB.h>
#include <Xm/CascadeB.h>
#include <Xm/Command.h>
#include <X11/cursorfont.h>
#include <petutil/winutil.h>


/* 
 * constants 
 */
#define	ACPC_PERCENTAGE			0.21	/* factor defining AC-PC line from Zmax */ 
#define	ECAT_PIXEL_SIZE			0.260777	/* ECAT image pixel size, cm / pixel */ 
#define	PETT6_SCALE			4.0	/* magnification factor for PETT6 display */ 
#define	ECAT_SCALE			2.0	/* magnification factor for ECAT display */ 
#define	PETT6_XSTART			120	/* PETT6 display x start */ 
#define	PETT6_YSTART			300	/* PETT6 display y start */ 
#define	ECAT_XSTART			80	/* ECAT display x start */ 
#define	ECAT_YSTART			100	/* ECAT display y start */ 
#define	PETT6_XINC			180	/* PETT6 display x increment */ 
#define	PETT6_YINC			200	/* PETT6 display y increment */ 
#define	ECAT_XINC			160	/* ECAT display x increment */ 
#define	ECAT_YINC			200	/* ECAT display y increment */ 
#define	OLDDEST_HIGH			987	/* maximum number for olddest group */ 
#define	OLDDEST_MAG_FACTOR		0.93	/* patient id < 987 */ 
#define	OLD_HIGH			1575	/* maximum number for old group */ 
#define	OLD_MAG_FACTOR			0.94 	/* patient id < 1575 && id >= 987 or old skull X ray */ 
#define	NEW_MAG_FACTOR			0.945 	/* mag. factor with patient id >= 1575 or new sxr */ 
#define	INCORRECT_DELTAZ_LOW		1611	/* incorrect_delta_z for patient id > this number */ 
#define	ECAT_MAG_FACTOR			0.96	/* ECAT magnification factor */ 
#define	ECAT_MAG_FACTOR_AFTER_OCT94	0.9325	/* ECAT magnification factor after Oct., 1994 */ 
#define	ECAT961_MAG_FACTOR		0.923	/* ECAT magnification factor for the 961 scanner */ 
#define	FIRST_SCAN_AFTER_OCT94		2490	/* first scan id after Oct., 1994 */ 
#define	FIRST_SCAN_AFTER_OCT95		2678	/* first scan id after October 19, 1995 */ 
#define	RASPIXEL_SIZE			0.0254	/* raster image pixel size, cm / pixel */ 
#define	PETT6_NUM_SLICES		7	/* PETT6 number of slices */ 
#define CROSSHAIR_SIZE			30	/* in pixels */
#define DISPLAY_MARGIN_WIDTH		100
#define DISPLAY_MARGIN_HEIGHT		100
#define DRAW_AREA_WIDTH			1600	/* dimension of screen */
#define DRAW_AREA_HEIGHT		1200	
#define MAIN_WINDOW_WIDTH		1152	/* dimension of showed screen */
#define MAIN_WINDOW_HEIGHT		870	/* dimension of showed screen */
#define CX_IMAGE			64.5	
#define CY_IMAGE			64.5	
#define BOUNDING_LINE_LENGTH		50
#define PET_LABEL_FONT	"-adobe-times-bold-r-normal--12-120-75-75-p-67-iso8859-1" /* default font for drawing text */
#define ACPC_FONT			"12x24romankana"
#define BITS_PER_HEX			4	
#define PS_ROW_LEN			80	
#define MESSAGE_NUM			7		
#define NUM_BOUNDARY_SLICES		3	/* number of boundary slices not used as a reference slice */


/* 
 * application defined structures 
 */
typedef struct 
{
	POINT2D	glabella;
	POINT2D	inion;
	POINT2D	slice_lpoint;
	POINT2D	slice_rpoint;
	POINT2D	left_ear_marker;
	POINT2D	right_ear_marker;
} DEFINING_POINTS;

typedef struct 
{
	POINT2D	glabella;
	POINT2D	inion;
	POINT2D	slice_anterior;
	POINT2D	slice_posterior;
	POINT2D	acpc_anterior;
	POINT2D	acpc_posterior;
	POINT2D	acpc_center;
	POINT2D	zvertex;
	POINT2D	vertex_zmax;
	POINT2D	ref_normalref;
	POINT2D	*slices_ap;
} DRAWING_POINTS;

struct rasterfile 
{
	long	ras_magic;	/* A 32-bit magic number identifies the file type */
#define	RAS_MAGIC	0x59a66a95	
	long	ras_width;	/* image width */
	long	ras_height;	/* image height */
	long	ras_depth;	/* bits for a pixel */
	long	ras_length;	/* image size in bytes */
	long	ras_type;	/* raster image type */
#define RT_OLD		0	/* OLd raw pixrect image in 68000 byte order */
#define RT_STANDARD	1	/* Raw pixrect image in 68000 byte order */
#define RT_BYTE_ENCODED	2	/* Run-length compression of bytes */
#define RT_FORMAT_RGB	3	/* XRGB or RGB instead of XBGR or BGR */
#define RT_FORMAT_TIFF	4	/* tiff <-> standard rasterfile */
#define RT_FORMAT_IFF	5	/* iff (TAAC format) <-> standard rasterfile */
#define RT_EXPERIMENTAL 0xffff	/* Reserved for testing */
	long	ras_maptype;
#define RMT_NONE	0
#define RMT_EQUAL_RGB	1
#define RMT_RAW		2
	long	ras_maplength;
};

typedef struct 
{
	Widget		*frameParameters;
	Widget		*labelXRayFile;
	Widget		*textMagnificationFactor;
	Widget		*textFilmPosition;
	Widget		*textScanPosition;
	Widget		*textOffset;
	Widget		*labelPetFile;
	Widget		*textPixelSize;
	Widget		*textSliceSpacing;
	Widget		*textReferenceSlice;
	Widget		*textNumberOfSlices;
	Widget		*textThreshold;
	SXR_OUTPUT	*sxr_output;
	char		*petfile;
	char		petimagetype;		
	char		trim;		
	int		pettnum;	
	BOOLEAN		encoded;
	float		ecat_offset;
	llist		petlist;
} PARAMETER_MENU;			/* structure for parameter menu */

typedef struct 
{
	Display		*display;
	Window		window;
	GC		gc;
} DRAW_DATA;

typedef enum 
{
	NoState,
	GlabellaState,
	InionState,
	LeftRefPointState,
	RightRefPointState,
	LeftEarMarkerState,
	RightEarMarkerState,
} PointerStatus;

typedef struct 
{
	DRAW_DATA	*draw_data;	
	Cursor		cursor;
	Pixel		xray_color;
	int		cols;
	int		rows;
	short int	*xray_tracing;
	Widget		message;
	XmString	*xm_message;
} XRAY_DATA;

typedef struct 
{
	DRAW_DATA	*draw_data;
	GC		xorgc;
	BOOLEAN		button_down_first;
	int		start_x;
	int		start_y;
	int		last_x;
	int		last_y;
	DEFINING_POINTS	*defining_points;
	DRAWING_POINTS	*drawing_points;
	int		cols;
	int		rows;
	short int	*xray_tracing;
	SXR_OUTPUT	*sxr_output;
	Widget		message;
	Widget		recompute;
	XmString	*xm_message;
	Pixel		xray_color;
	Pixel		marker_color;
	Pixel		pet_color;
} GRAPHICS_DATA;

typedef struct 
{
	char		node;
	PARAMETER_MENU	*parameter_menu;
	GRAPHICS_DATA	*graphics_data;
} PARAMETER_DATA;			/* structure for parameter data */

typedef struct 
{
	DRAW_DATA	*draw_data;
	Widget		dialog;
} DATA_FILE_SELECTION;

typedef struct 
{
	DRAW_DATA	*draw_data;
	Cursor		cursor;
	DRAWING_POINTS	*drawing_points;
	int		cols;
	int		rows;
	short int	*xray_tracing;
	char		*postscript_file;
} PRINT_DATA;

typedef struct 
{
	char		*sxr_name;
	char		*petfile;
	char		*sxr_root;
	BOOLEAN		incorrect_delta_z;
	SXR_OUTPUT	*sxr_output;
} SAVESXR_DATA;

typedef struct 
{
	DRAW_DATA	*draw_data;
	Pixel		pet_color;
	Pixel		peak_color;
	Pixel		xray_color;
	int		pettnum;	/* PET number */
	SXR_OUTPUT	*sxr_output;
	llist		petlist;
	Widget		*dialog;
	Widget		*text_peak_slice;
} DISPLAY_PET_DATA;

typedef struct 
{
	char			node;
	PARAMETER_MENU		*parameter_menu;
	DISPLAY_PET_DATA	*display_pet_data;
} PEAK_SLICE_CHANGED_DATA;

typedef struct 
{
	short int	*xray_tracing;
	float		*rlslicedim;		/* Right-Left dimension of slices (cm) in Xray*/
	float		*rlpetdim;		/* Right-Left dimension of PET slices (pixel) */
	float		*rlcenter;		/* center of the right-left axis of PET slices (pixel no.) */
	float		*vertical_petdim;	/* Top-Bottom dimension of PET slices (pixel) */
	XmString	*xm_message;
	llist		petlist;
} QUIT_DATA;


/* 
 * function prototypes 
 */
PUBLIC GC	CreateXorGC ();
PUBLIC void	DoPseudo ();
PUBLIC int	GetXColors ();
PUBLIC int	GetMagnificationFactor ();
PUBLIC void	GetRotationAngles ();
PUBLIC void	GetXRayParameters ();
PUBLIC void	PetColormap ();
PUBLIC void	ReadRaster ();
PUBLIC int	SetParameters ();
PUBLIC void	WindowDump ();
PUBLIC void	interp ();


/* 
 * global variables 
 */
PUBLIC PointerStatus	cPointerState;

#endif /* _XRAY_H_INCLUDED */

@


1.24
log
@Added the HR961 offset.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.23 1995/02/08 18:15:56 ty7777 Exp ty7777 $*/
d3 3
d140 1
@


1.23
log
@Added FIRST_SCAN_AFTER_OCT94.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.22 1994/12/22 20:10:03 ty7777 Exp ty7777 $*/
d3 3
d135 1
@


1.22
log
@Updated to regenerate PETT6 .sxr files.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.21 1994/11/02 15:31:31 ty7777 Exp ty7777 $*/
d3 3
d132 1
@


1.21
log
@After making new ecat offset work.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.20 1994/11/01 20:39:18 ty7777 Exp ty7777 $*/
d3 3
d99 1
d124 3
a126 2
#define	OLD_MAG_FACTOR			0.945	/* patient id < 1575 && id >= 987 or old skull X ray */ 
#define	NEW_MAG_FACTOR			0.947	/* mag. factor with patient id >= 1575 or new sxr */ 
d306 1
@


1.20
log
@Added ECAT_MAG_FACTOR_AFTER_OCT.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.19 1994/09/20 16:01:40 ty7777 Exp ty7777 $*/
d3 3
d215 1
d342 1
a342 1
PUBLIC void	GetMagnificationFactor ();
@


1.19
log
@Updated for peakslice processing.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.18 1994/09/02 21:28:45 ty7777 Exp ty7777 $*/
d3 3
d102 31
a132 30
#define	ACPC_PERCENTAGE		0.21	/* factor defining AC-PC line from Zmax */ 
#define	ECAT_PIXEL_SIZE		0.260777	/* ECAT image pixel size, cm / pixel */ 
#define	PETT6_SCALE		4.0	/* magnification factor for PETT6 display */ 
#define	ECAT_SCALE		2.0	/* magnification factor for ECAT display */ 
#define	PETT6_XSTART		120	/* PETT6 display x start */ 
#define	PETT6_YSTART		300	/* PETT6 display y start */ 
#define	ECAT_XSTART		80	/* ECAT display x start */ 
#define	ECAT_YSTART		100	/* ECAT display y start */ 
#define	PETT6_XINC		180	/* PETT6 display x increment */ 
#define	PETT6_YINC		200	/* PETT6 display y increment */ 
#define	ECAT_XINC		160	/* ECAT display x increment */ 
#define	ECAT_YINC		200	/* ECAT display y increment */ 
#define	OLDDEST_HIGH		987	/* maximum number for olddest group */ 
#define	OLDDEST_MAG_FACTOR	0.93	/* patient id < 987 */ 
#define	OLD_HIGH		1575	/* maximum number for old group */ 
#define	OLD_MAG_FACTOR		0.945	/* patient id < 1575 && id >= 987 or old skull X ray */ 
#define	NEW_MAG_FACTOR		0.947	/* magnification factor with patient id >= 1575 or new sxr */ 
#define	ECAT_MAG_FACTOR		0.96	/* ECAT magnification factor */ 
#define	RASPIXEL_SIZE		0.0254	/* raster image pixel size, cm / pixel */ 
#define	PETT6_NUM_SLICES	7	/* PETT6 number of slices */ 
#define CROSSHAIR_SIZE		30
#define DISPLAY_MARGIN_WIDTH	100
#define DISPLAY_MARGIN_HEIGHT	100
#define DRAW_AREA_WIDTH		1600	/* dimension of screen */
#define DRAW_AREA_HEIGHT	1200	
#define MAIN_WINDOW_WIDTH	1152	/* dimension of showed screen */
#define MAIN_WINDOW_HEIGHT	870	/* dimension of showed screen */
#define CX_IMAGE		64.5	
#define CY_IMAGE		64.5	
#define BOUNDING_LINE_LENGTH	50
d134 5
a138 5
#define ACPC_FONT		"12x24romankana"
#define BITS_PER_HEX		4	
#define PS_ROW_LEN		80	
#define MESSAGE_NUM		7		
#define NUM_BOUNDARY_SLICES	3	/* number of boundary slices not used as a reference slice */
@


1.18
log
@Added ACPC_FONT.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.17 1994/09/02 19:00:48 ty7777 Exp ty7777 $*/
d3 3
d300 1
d303 1
d305 2
d308 7
@


1.17
log
@Update to incorporated new algorithm for setting the reference slice.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.16 1994/09/01 21:04:37 ty7777 Exp ty7777 $*/
d3 3
d126 2
a127 1
#define FONT	"-adobe-times-bold-r-normal--12-120-75-75-p-67-iso8859-1" /* default font for drawing text */
@


1.16
log
@Updated for new algorithm.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.15 1993/12/20 21:27:28 ty7777 Exp ty7777 $*/
d3 3
d75 2
d263 6
@


1.15
log
@Added recompute to GRAPHICS_DATA.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.14 1993/10/06 19:01:37 ty7777 Exp ty7777 $*/
d3 3
d111 1
a111 1
#define DRAW_AREA_WIDTH		1600		/* dimension of screen */
d113 2
a114 2
#define MAIN_WINDOW_WIDTH	1152		/* dimension of showed screen */
#define MAIN_WINDOW_HEIGHT	870		/* dimension of showed screen */
d122 1
@


1.14
log
@more ENCODED_NUM_SLICES to petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.13 1993/09/14 16:18:05 ty7777 Exp ty7777 $*/
d3 3
d79 1
a79 1
#include <petutil/petutil.h>
d217 1
d241 1
d243 3
d250 7
d277 2
@


1.13
log
@Some constants are moved to petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.12 1993/09/10 14:48:56 ty7777 Exp ty7777 $*/
d3 3
a101 1
#define	ECAT_NUM_SLICES		31	/* ECAT number of slices */ 
@


1.12
log
@Move TYPE to XRAY_TYPE in /usr/local/include/petutil/petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.11 1993/09/09 20:22:43 ty7777 Exp ty7777 $*/
d3 3
a79 2
#define	PERCENT_FACTOR		0.01	/* percent factor = 1 / 100 */ 
#define	ONE_HUNDRED		100	/* one hundred */ 
a80 1
#define	ECAT_SEPARATION		0.3375	/* ECAT slice separation, cm */ 
a90 3
#define	ZATLAS_DIMENSION	7.0	/* the vertical dimension from center of AC-PC in atlas */ 
#define	APATLAS_DIMENSION	16.3	/* length AC-PC in the atlas */ 
#define	EARSEP_OFFSET		0.3	/* factor added to ear separation */ 
a97 4
#define	PETT6_REFERENCE		3	/* default PETT6 reference slice number */ 
#define	PETT6_OFFSET		0.0	/* default PETT6 offset from reference slice */ 
#define	ECAT_REFERENCE		16	/* default ECAT reference slice number */ 
#define	ECAT_OFFSET		352.8	/* default ECAT offset from reference slice, mm */ 
a112 5
#define TRANSMISSION_SCAN	1		
#define EMISSION_SCAN		2		
#define DEFAULT_PETT6_TRANS_THRESH	80		
#define DEFAULT_ECAT_TRANS_THRESH	80		
#define DEFAULT_ECAT_EMISSION_THRESH	50		
a183 1
	char		peaktype;		
d187 1
a251 1
	char		peaktype;
a258 14
	int	slice_index;		
	short	*input;		/* PET image data after clipping */
	int	xstart;		/* PET image x start */
	int	ystart;		/* PET image y start */
	int	width;		/* PET image width */
	int	height;		/* PET image height */
	POINT2D	bottom;
	POINT2D	left;
	POINT2D	right;
	POINT2D	top;
} PET_SLICE_DATA;		/* structure for a single slice */

typedef struct 
{
d261 1
a278 1
PUBLIC void	interp ();
d280 2
a282 1
PUBLIC int	GetPetParameters ();
a287 3
PUBLIC void	Transformation ();
PUBLIC void	DoPseudo ();
PUBLIC int	GetXColors ();
d289 1
a294 1
PUBLIC char		list [];
a295 1
PUBLIC llist		petlist;
@


1.11
log
@Moved DAY, MONTH, YEAR to /usr/local/include/petutil/petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.10 1993/05/06 14:55:52 ty7777 Exp ty7777 $*/
d3 3
a78 1
#define	TYPE			20	/* created by xray 3.0 */
@


1.10
log
@Before making print work.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.9 1993/04/28 21:15:56 ty7777 Exp ty7777 $*/
d3 3
a73 2
#define	PEAK_PER_SLICE		1	/* peak per slice type */ 
#define	PEAK_PER_SCAN		2	/* peak per scan type */ 
a97 4
#define	DATE_COMPONENTS		3	/* length of date array */ 
#define	YEAR			0	/* year index of date array */ 
#define	MONTH			1	/* month index of date array */ 
#define	DAY			2	/* day index of date array */ 
a310 1
PUBLIC void	SaveSXRData ();
@


1.9
log
@Move TRANSMISSION_ECAT, EMISSION_ECAT, etc to /usr/local/include/petutil/petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.8 1993/04/21 16:35:21 ty7777 Exp ty7777 $*/
d3 3
a75 2
#define	MMS_PER_CM		10	/* milimeters in a cm */
#define	PETT6_PIXEL_SIZE	0.286	/* PETT6 image pixel size, cm / pixel */ 
a76 1
#define	PETT6_SEPARATION	1.44	/* PETT6 slice separation, cm */ 
@


1.8
log
@Moved SXR_OUTPUT to petutil.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.7 1993/02/19 16:50:57 ty7777 Exp ty7777 $*/
d3 3
a122 5
#define TRANSMISSION_ECAT	2		
#define TRANSMISSION_PET1010	1010		
#define EMISSION_PET1020	1020		
#define EMISSION_PET2000	2000		
#define EMISSION_PET2010	2010		
@


1.7
log
@Before adding film position, scan position, and offset.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.6 1993/02/17 20:41:46 ty7777 Exp ty7777 $*/
d3 3
a57 1

a133 41

typedef struct 
{
	char	threshold;		/* threshold */
	float	film_position;		/* Film position */
	float	scan_position;		/* Scan position */
	float	reference_offset;	/* offset from reference slice, mm */
	char	type;			/* SXR file type */
	float	pixel_size;		/* pixel size (cm / pixel) */
	float	magnification_factor;	/* magnification factor for the skull X ray */
	int	number_slices;		/* number of slices */
	float	slice_separation;	/* PET slice separation (cm) */
	int	reference_slice;	/* PET reference slice from which measures are made */
	float	zatlas_dimension;	/* the vertical dimension from center of AC-PC in atlas (cm) */
	float	apatlas_dimension;	/* length of the AC-PC in the atlas (cm) */
	float	apxray;			/* length of the AC-PC line on the skull xray (cm) */
	float	degx;			/* angle between a PET slice and the AC-PC line (degree) */
	float	zxray;			/* distance from the center of the AC-PC to reference 
					   to the vertex of the skull xray (cm) */
	float	dz;			/* distance from the center of the AC-PC to reference 
					   slice using a line perpendicular to reference slice (cm) */
	float	dap;			/* distance from the A-P center of the reference slice
					   to the intersection point of the line perpendicular to the 
					   reference slice passing the center of the AC-PC 
					   and the reference slice (cm) */
	float	apcenter;		/* coordinate of the A-P center for the reference slice (pixel) */
	float	ear_separation;		/* Right-Left separation of the ear markers (cm) */
	float	eardap;			/* distance between the ear markers in the skull xray (cm) 
					   parallel to the AC-PC line */
	float	eardz;			/* distance between the ear markers in the skull xray (cm) 
					   perpendicular to the AC-PC line */
	float	degy;			/* angle of rotation about the y-axis (degree), 
					   computed from eardz and earsep */
	float	degz;			/* angle of rotation about the z-axis (degree),
					   computed from eardap and earsep */
	float	*rlslicedim;		/* Right-Left dimension of slices (cm) in Xray*/
	float	*rlpetdim;		/* Right-Left dimension of PET slices (pixel) */
	float	*rlcenter;		/* center of the right-left axis of PET slices (pixel no.) */
	float	*vertical_petdim;	/* Top-Bottom dimension of PET slices (pixel) */
} SXR_OUTPUT;				/* structure for skull X ray output */

@


1.6
log
@Before changing xray slices lengths computation order.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.5 1993/02/15 20:35:36 ty7777 Exp ty7777 $*/
d3 3
d300 1
@


1.5
log
@Before adding lines for xray slice lines.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.4 1993/02/09 18:23:32 ty7777 Exp $*/
d3 3
d192 1
@


1.4
log
@Release checking in.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.3 1993/01/27 22:07:40 ty7777 Exp $*/
d3 3
d63 2
a64 2
#define	PETT6_PIXEL_SIZE	0.286	/* PETT6 pixel size, cm / pixel */ 
#define	ECAT_PIXEL_SIZE		0.260777	/* ECAT pixel size, cm / pixel */ 
d118 2
d129 4
a132 1
	float	reference_offset;	/* offset from reference slice */
d187 1
a227 1
	char		*threshold;
a297 1
	char		threshold;
@


1.3
log
@Adding trim, encoded, etc to xray.h.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.2 1993/01/27 20:44:52 ty7777 Exp ty7777 $*/
d3 3
d210 2
@


1.2
log
@After adding PET image width and skull X ray width.
@
text
@d1 1
a1 1
/*$Id: xray.h,v 1.1 1993/01/26 21:01:10 ty7777 Exp ty7777 $*/
d3 3
d216 6
@


1.1
log
@Initial revision
@
text
@d1 5
a5 2
/*$Id$*/
/*$Log$*/
d147 1
d150 1
d306 1
d309 1
@
