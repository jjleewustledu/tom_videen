head	1.46;
access;
symbols;
locks; strict;
comment	@c @;


1.46
date	94.11.29.23.33.24;	author ty7777;	state Exp;
branches;
next	1.45;

1.45
date	94.11.29.23.09.32;	author ty7777;	state Exp;
branches;
next	1.44;

1.44
date	94.08.16.16.37.01;	author tom;	state Exp;
branches;
next	1.43;

1.43
date	94.06.17.21.30.56;	author ty7777;	state Exp;
branches;
next	1.42;

1.42
date	94.06.17.21.17.46;	author ty7777;	state Exp;
branches;
next	1.41;

1.41
date	94.06.16.21.00.59;	author ty7777;	state Exp;
branches;
next	1.40;

1.40
date	94.06.14.15.57.23;	author ty7777;	state Exp;
branches;
next	1.39;

1.39
date	94.06.10.15.06.46;	author ty7777;	state Exp;
branches;
next	1.38;

1.38
date	94.06.06.17.56.35;	author ty7777;	state Exp;
branches;
next	1.37;

1.37
date	94.06.06.17.07.54;	author ty7777;	state Exp;
branches;
next	1.36;

1.36
date	94.06.06.17.00.49;	author ty7777;	state Exp;
branches;
next	1.35;

1.35
date	94.05.25.20.17.47;	author ty7777;	state Exp;
branches;
next	1.34;

1.34
date	94.05.02.16.40.18;	author ty7777;	state Exp;
branches;
next	1.33;

1.33
date	94.02.08.20.32.56;	author ty7777;	state Exp;
branches;
next	1.32;

1.32
date	94.01.27.16.10.44;	author ty7777;	state Exp;
branches;
next	1.31;

1.31
date	94.01.21.18.40.37;	author ty7777;	state Exp;
branches;
next	1.30;

1.30
date	94.01.21.18.20.15;	author ty7777;	state Exp;
branches;
next	1.29;

1.29
date	94.01.14.19.22.22;	author ty7777;	state Exp;
branches;
next	1.28;

1.28
date	94.01.07.20.50.26;	author ty7777;	state Exp;
branches;
next	1.27;

1.27
date	94.01.07.20.49.30;	author ty7777;	state Exp;
branches;
next	1.26;

1.26
date	93.11.24.20.31.25;	author ty7777;	state Exp;
branches;
next	1.25;

1.25
date	93.11.24.17.30.54;	author ty7777;	state Exp;
branches;
next	1.24;

1.24
date	93.11.18.20.11.57;	author ty7777;	state Exp;
branches;
next	1.23;

1.23
date	93.11.18.20.04.30;	author ty7777;	state Exp;
branches;
next	1.22;

1.22
date	93.10.05.21.20.50;	author tom;	state Exp;
branches;
next	1.21;

1.21
date	93.10.04.21.55.32;	author tom;	state Exp;
branches;
next	1.20;

1.20
date	93.07.14.18.50.40;	author ty7777;	state Exp;
branches;
next	1.19;

1.19
date	93.07.12.21.20.26;	author tom;	state Exp;
branches;
next	1.18;

1.18
date	93.03.04.16.30.25;	author ty7777;	state Exp;
branches;
next	1.17;

1.17
date	92.12.08.21.10.12;	author ty7777;	state Exp;
branches;
next	1.16;

1.16
date	92.10.21.16.14.22;	author ty7777;	state Exp;
branches;
next	1.15;

1.15
date	92.10.13.19.47.34;	author ty7777;	state Exp;
branches;
next	1.14;

1.14
date	92.10.08.15.49.24;	author ty7777;	state Exp;
branches;
next	1.13;

1.13
date	92.08.21.20.15.51;	author ty7777;	state Exp;
branches;
next	1.12;

1.12
date	92.08.21.20.11.10;	author ty7777;	state Exp;
branches;
next	1.11;

1.11
date	92.04.30.17.11.09;	author ty7777;	state Exp;
branches;
next	1.10;

1.10
date	92.04.29.15.26.55;	author ty7777;	state Exp;
branches;
next	1.9;

1.9
date	92.04.28.22.49.14;	author ty7777;	state Exp;
branches;
next	1.8;

1.8
date	92.04.23.21.25.39;	author ty7777;	state Exp;
branches;
next	1.7;

1.7
date	92.04.22.18.45.01;	author ty7777;	state Exp;
branches;
next	1.6;

1.6
date	92.04.22.18.10.02;	author ty7777;	state Exp;
branches;
next	1.5;

1.5
date	92.04.22.15.58.13;	author ty7777;	state Exp;
branches;
next	1.4;

1.4
date	92.04.22.15.22.00;	author ty7777;	state Exp;
branches;
next	1.3;

1.3
date	92.04.22.15.14.52;	author ty7777;	state Exp;
branches;
next	1.2;

1.2
date	92.04.14.15.01.38;	author tom;	state Exp;
branches;
next	1.1;

1.1
date	92.04.13.19.12.07;	author tom;	state Exp;
branches;
next	;


desc
@Spideram function.
@


1.46
log
@Changed the date.
@
text
@C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.45 1994/11/29 23:09:32 ty7777 Exp ty7777 $
C $Log: main.f,v $
c Revision 1.45  1994/11/29  23:09:32  ty7777
c Use initial slice and number of slices for GBA.
c
c Revision 1.44  1994/08/16  16:37:01  tom
c Modified a2save.f to use lowercase "rgt" and to close file after write.
c
c Revision 1.43  1994/06/17  21:30:56  ty7777
c Added message for PC display.
c
c Revision 1.42  1994/06/17  21:17:46  ty7777
c Change the date format for pc screen.
c
c Revision 1.41  1994/06/16  21:00:59  ty7777
c The current version works on both the Workstation and the PCs.
c
c Revision 1.40  1994/06/14  15:57:23  ty7777
c Move down the save window dump menu.
c
c Revision 1.39  1994/06/10  15:06:46  ty7777
c Use the PCFLAG in ramimg ().
c
c Revision 1.38  1994/06/06  17:56:35  ty7777
c Correct the date.
c
c Revision 1.37  1994/06/06  17:07:54  ty7777
c Update the date.
c
c Revision 1.36  1994/06/06  17:00:49  ty7777
c Added arguments for ramini ().
c
c Revision 1.35  1994/05/25  20:17:47  ty7777
c Modified to read reg files generated from locate.
c
c Revision 1.34  1994/05/02  16:40:18  ty7777
c Added initialization for the zorigin.
c
c Revision 1.33  1994/02/08  20:32:56  ty7777
c Fixing the color bar display problem in half brain.
c
c Revision 1.32  1994/01/27  16:10:44  ty7777
c Changed the Unix path input place.
c
c Revision 1.31  1994/01/21  18:40:37  ty7777
c Added copyright.
c
c Revision 1.30  1994/01/21  18:20:15  ty7777
c Added the copyright message.
c
c Revision 1.29  1994/01/14  19:22:22  ty7777
c Added processing for images with more than 49 slices.
c
c Revision 1.28  1994/01/07  20:50:26  ty7777
c Change the date.
c
c Revision 1.27  1994/01/07  20:49:30  ty7777
c Adding template for images with more than 49 slices.
c
c Revision 1.26  1993/11/24  20:31:25  ty7777
c RAMINI is changed.
c
c Revision 1.25  1993/11/24  17:30:54  ty7777
c Added RMFILE to XRAMEXIT.
c
c Revision 1.24  1993/11/18  20:11:57  ty7777
c Changed region extension.
c
c Revision 1.23  1993/11/18  20:04:30  ty7777
c libpe.a is changed to process the ButtonRelease signal.
c
c Revision 1.22  1993/10/05  21:20:50  tom
c new version for x-reversed ecat images
c
c Revision 1.21  1993/10/04  21:55:32  tom
c added ability to display ntype = 11 or 12 (oef and cmro2 from t88mean)
c
c Revision 1.20  1993/07/14  18:50:40  ty7777
c Rebuilt with new libraries libpetutil.a. Use default ecat_calibration_fctr
c if the one in the image_subheader is 0.
c
c Revision 1.19  1993/07/12  21:20:26  tom
c Rebuilt with new libpetutil:
c pixel value = pixel * quant_factor * frame_duration * ecat_calibration_fctr
c
c Revision 1.18  1993/03/04  16:30:25  ty7777
c Before moving to HP machines.
c
c Revision 1.17  1992/12/08  21:10:12  ty7777
c Before calling libcti library.
c
c Revision 1.16  1992/10/21  16:14:22  ty7777
c Changed scaling factor of ECAT images to 1.0.
c
c Revision 1.15  1992/10/13  19:47:34  ty7777
c Replace CTOI with NEWCTOI.
c
c Revision 1.14  1992/10/08  15:49:24  ty7777
c Before libpetutil library changed.
c
c Revision 1.13  1992/08/21  20:15:51  ty7777
c Testing RCS checking in.
c
c Revision 1.12  1992/08/21  20:11:10  ty7777
c After fixing ECAT number of slices bug.
c
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
C
C  Program:      spideram.f
C
C  Author:       Tom O. Videen
C  Date:         12-Jun-87
C  Written For:  Super PETT II Image Display Program
C
C  Intent:
C     This is an interactive program for displaying PET images,
C     defining regions on them, and performing statistical
C     calculations on defined regions.
C     This program presents the main menu and call subroutines to
C     execute the option selected.
C
C     The program is called through SPIDERAM.CSS
C
C  History:
C     Modified by TOV 16-Jul-87:
C       1) change record length of .REG file from 256 to 80;
C       2) color scaling ranges from 0-240 for normal images
C            (instead of 0-256) and from 320-480 for relative images
C            (instead of 300-500); COLOR40 and 41 are default tables;
C       3) correct bug in scaling quarter screen images to individual max;
C     Modified by TOV 12-Aug-87:
C       1) allow GETIMAGE to read write-protected files by avoiding
C            a compiler bug for INQUIRE statements;
C       2) eliminate a bug in error checking for max. number of sections
C            to display for coronal and sagittal sections;
C     Modified by TOV 21-Aug-87:
C       1) M2FILES delete option reinitializes PETTNUM and NMSLICES
C            iff there are no files remaining in the list;
C       2) Add a fast file entry option in SPIDERAM (subroutine M2FASTF);
C     Modified by TOV 26-Aug-87:
C       1) eliminate a bug in right/left hemisphere values in G2WHOLES;
C       2) allow selection of a different midline value in M2GLOBAL
C            without returning to the regions menu;
C     Modified by TOV 03-Sep-87:
C       1) correct a bug in A2SAVE in write format for RGT files;
C       Note: Dan Schuster wants an RGT file with 80 columns which
C          requires a modification of A2SAVE.
C     Modified 11-Sep-87 by TOV to add messages for overriding
C        non-blank file extensions in M2FASTF.
C     Modified 15-Sep-87 by TOV to correct a minor bug in the
C        displayed menu in A2ANALYZ.
C     Modified 02-Oct-87 by TOV to set SCALER for tissue activity
C        processing to 10.0 in D2PROCES.
C     Modified 06-Oct-87 by TOV to allow processing for tissue activity
C        either with decay correction, as well as without;
C        (add PETTDCOR to common block; PROCESS may be 0-5 instead of 0-3)
C        (altered:  SPIDERAM.FTN, SPIDERAM.INC, M2ANALYZ, M2DISPLA,
C         M2GLOBAL, M2INIT, D2BARLAB, D2BARTWO, D2GETIMG, D2OPTION,
C         D2OXYGEN, D2PRCIMG, D2PROCES, G2MEANRG, G2WHOLES)
C     Modified by TOV 30-Dec-87:
C       1) Read write-protected .REG files (R2GET).
C       2) Default REFRESH=FALSE, NUMDISP=7 (M2INIT).
C       3) Use SCANNAME(n) as file name to write in D2LABEL4 and D2BARLAB.
C       4) Regional statistics written to terminal instead of to Ramtek
C          (R2STATS).
C       5) Option to scale to slice maximum with rows of 7
C          (SPIDERAM.INC,M2INIT,M2DISPLA,D2DISPLA,D2OPTION).
C       6) Corrected a bug in D2COMPAR (row and col indices
C           were reversed in the DO loops).
C       7) Added color table 42 to prompts in M2SCALE.
C       8) Fixed R2FLIP so that irregular regions are reversed
C           symmetrically and not just shifted.
C       9) A2PRINT altered to print region file name and type
C           processing used in automatic region processing.
C     Modified by TOV 15-Sep-88:
C       1) Read PETT VI filter name (D2GETIMG).
C       2) Eliminate REFRESH from **DISPLAY common block.
C          (SPIDERAM.INC,D2OPTION,D2DISPLA,M2INIT,M2DISPLA)
C       3) Change FILETP from I*4 to CH*23 in **DISPLAY common block.
C          (SPIDERAM.INC,D2OPTION,D2TEMPLA,M2INIT,M2DISPLA,M2GLOBAL,
C           M2SPLIT,G2WHOLES)
C       4) Fix bug in M2GLOBAL.  Now, global processing locally resets
C           ABSSCALE-->true, ABSRANGE-->false, and COMPARE-->false.
C       5) Include VERSION date in **LUINFO and in all printouts.
C          (SPIDERAM.INC,A2PRINT,G2MEANRG,G2WHOLES)
C       6) Set SCANNAME(3) in D2PRCIMG when the third file
C          used in comparisons is the same as either 1 or 2.
C       7) Correct a bug in SCALER, which was not computed properly
C          during division with processed images. (D2COMPAR)
C       8) Eliminate a confusing scale factor for images with a divisor.
C          The scale factor is now incorporated into SCALER(1) in D2COMPAR.
C          (D2SCALER,D2DISPLA,D2COMPAR,D2BARLAB,D2BARTWO)
C     Modified 02-Oct-89 by TOV:
C       1) Scale appropriately for templated 49-slice images
C          (TEMPLATE=4) in D2MAXVAL
C     Modified 14-Nov-89 by TOV:
C       1) Read and display Scanditronix PC2048-15B images read from
C          tape and converted to Super PETT IIH format by SPGET.
C          (D2GETIMG,GETIMAGE)
C     Modified 03-Jan-90 by TOV:
C       1) Allow templates to be created with 15-slice images (instead of 14).
C          (SPIDERAM.INC,M2DISPLA,D2TEMPLA,M2INIT)
C     Modified 01-Feb-90 by TOV:
C        1) Write stereotaxic section numbers for images with
C           49 slices (assumed to be SARP images).
C           (D2DISPLA, D2LABEL2, D2LABEL4)
C        2) Correct bug in M2FILES and M2FASTF in which SLCNUM
C           was not assigned a value prior to calling D2GETIMG.
C     Modified by TOV 09-Feb-90 to eliminage bug in computing mean values
C        for multiple scan files. (G2MEANRG)
C     Modified by Tom Yang on Sep. 24, 1991 to delete the Fast Scan File
C        menu from the main menu when porting to Sun Workstation.
C     Modified by TOV 14-Oct-91
C        1) MULTFACT(20) scan factors may be automatically entered
C           during global averaging. (M2GLOBAL, G2WHOLES, G2MEANRG)
C        2) Option U=Unix Path added to main menu.
C           Replace GETIMAGE with GETUIMAGE.
C           (main, spideram.inc, M2FILES, D2GETIMG)
C     Modified by Tom Yang on Feb. 23, 1992 to add menu for saving
C        ramtek screen as window dump files. 
C     Modified by TOV 14-Apr-92
C			   1) allow templating of 49-slice images (m2displa)
C     Modified by Tom Yang on 27-Apr-92
C	 1) use standard library functions from libpetutil.
C		(getuimage.f)
C        2) read ECAT images (getuimage.f).
C     Modified by Tom Yang on 28-Apr-92
C        1) process ECAT images (d2getimg.f).
C     Modified by Tom Yang on 29-Sep-92
C        Changed processing for ECAT attenuation images.
C     Modified by Tom Yang on 06-Oct-92
C        Display ECAT transmission images.
C     Modified by Tom Yang on 12-Oct-92
C        Replace CTOI with NEWCTOI in m2global.f, m2split.
C     Modified by Tom Yang on 21-Oct-92
C        Changed scaling factor of ECAT image to 1.0.
C     Modified by Tom Yang on 28-Oct-92
C        Read .hdr or .HDR header files (d2getimg.f).
C     Modified by Tom Yang on 29-Dec-92
C        Save and get regions on an ECAT image (r2get.f, r2save.f). 
C     Modified by TOV:
C	 1) process NTYPE = 11 and 12
C	 2) add rcsheader to all modules
C     Modified by Tom Yang on 18-Nov-93 
C        1) Added the button release signal.
C        2) Changed the region extension from REG to reg.
C     Modified by Tom Yang on 24-Nov-93 
C        1) XRAMEXIT is changed in libpe.a and an extra argument is added as a flag.
C        2) Use color table 40 as the default color table.
C     Modified by Tom Yang on 07-Jan-94 
C        1) Allow templates to be created for images with more than 49 slices.
C        2) Close TDISK and STDISK at exit.
C     Modified by Tom Yang on 14-Jan-94 
C        1) Global averaging for images with more than 49 slices.
C        2) Display of images with more than 49 slices.
C     Modified by Tom Yang on 21-Jan-94 to add copyright message. 
C     Modified by Tom Yang on 08-Feb-94 to fix the split brain display bug.
C     Modified by Tom Yang on 25-May-94 to read reg files generated from the 
C        program locate. Files that are changed are m2region.f and r2get.f. 
C     Modified by Tom Yang on 06-June-94 to add arguments for RAMINI.
C     Modified by Tom Yang on 10-June-94 to add PCFLAG for RAMIMG.
C     Modified by Tom Yang on 16-June-94 to move down the save screen menu.
C     Modified by Tom Yang on 17-June-94 to make spideram work both on the Workstation
C	and on the PCs.
C     Modified 16-Aug-94 TOV
C       1) Close rgt files after writing to force output to disk (a2save.f)
C       2) Use lowercase "rgt" instead of "RGT" (a2save.f)
C     Modified by Tom Yang on 29-Nov-94 
C       1) Added global variables NRMVALUE and GLBSTART (spideram.inc)
C       2) Added processing to let users specify only the number of slices
C          and the initial slice for global averages (m2global.f, g2wholes.f, 
C          g2meanrg.f, and m2init.f).
C       3) Fixed the bug for NRMVALUE (m2global.f)
C
C  Common blocks from SPIDERAM.INC
C     **LUINFO  - logical units (also /USRIO/)
C     **FILES   - scan file list
C
C  Uses Subroutines:
C
C  FIELDS.LIB - terminal I/O routines using fields:
C     TERMSET  - set terminal control parameters;
C     TCONTROL - terminal control;
C     CHFIELD  - get a character from terminal;
C     WRTFIELD - write a character string to a field;
C     ERSFIELD - erase a field;
C     QUERY    - get Y or N response from a field;
C
C  SPIDERAM.LIB - main subroutines for SPIDERAM:
C     M2INIT   - initialize parameters;
C     M2DISPLA - display options;
C     M2SCALE  - color scales options;
C     M2FASTF  - fast entry of scan file list;
C     M2FILES  - scan file list;
C     M2GLOBAL - global averaging;
C     M2SPLIT  - half-brain or split images;
C     M2REGION - regions;
C     M2ANALYZ - regions analysis;
C
C  RAMUTY.LIB - Ramtek utilities:
C     RAMINI   - initialize Ramtek;
C     RAMRST   - reset Ramtek;
C
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
C
      PROGRAM SPIDERAM
C
      CHARACTER*1   CH           ! input character for selecting a menu option
      CHARACTER*80  TITLE (2)    ! menu title
      CHARACTER*80  COPYRGHT (2) ! copyright message
      CHARACTER*80  MENU (12)    ! menu options
      CHARACTER*80  MENUSET      ! set of characters allowed for menu options
      CHARACTER*80  Q            ! query to user
      CHARACTER*30  USERNAME     ! user name
      CHARACTER*80  TPLTFILE     ! template file name
      CHARACTER*80  TMPPATH      ! template path name
      CHARACTER*40  CLEAR        ! used to clear a string 
      CHARACTER*40  PCSTR        ! string containing the option "-pc"
      CHARACTER*256 LIBPATH      ! directory where the color tables and data files are located
      CHARACTER*256 RCSHEADER    ! RCS header information
C
      INTEGER*4     AUXLU        ! log unit containing the terminal type
      INTEGER*4     VOLLU        ! log unit containing default volume names
      INTEGER*4     ROWCH, COLCH ! location of the field for entering CH
      INTEGER*4     WARNLINE     ! line no. to write warning messages on
      INTEGER*4     L1, L2, L
      INTEGER*4     RMFILE
C
      LOGICAL*1     A            ! answer
      LOGICAL*1     NEXT
      LOGICAL*1     PRINTON     
      LOGICAL*1     PATHOK     
      LOGICAL*1     XWDEXT     
      LOGICAL*1     XWDFLAG     
C
      INCLUDE 'spideram.inc'
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.45 1994/11/29 23:09:32 ty7777 Exp ty7777 $"

      DATA USERIN,USEROUT,DISK,TDISK,STDISK /5,6,4,8,9/
      DATA RMD, PRINTER /10, 11/
      DATA AMAX  /128/
      DATA AUXLU, VOLLU  /1, 2/
      DATA FONT1C,FONT2C  /1,2/
C
      DATA TITLE(1) /'   Super PETT Image Display Employing   '/
      DATA TITLE(2) /'Regional Analysis & Metabolic Conversion'/
      DATA VERSION  /'29-Nov-94'/
      DATA COPYRGHT(1) /'Copyright 1985-1994, Washington University.'/
      DATA COPYRGHT(2) /'All rights reserved. Unauthorized reproduction prohibited.'/
      DATA MENU(1)  /'D = Display Options'/
      DATA MENU(2)  /'C = Color Scales'/
      DATA MENU(3)  /'S = Scan File List'/
      DATA MENU(4)  /'U = Unix Path Selection'/
      DATA MENU(5)  /'R = Regions'/
      DATA MENU(6)  /'A = Analysis of Regions'/
      DATA MENU(7)  /'G = Global Averaging'/
      DATA MENU(8)  /'H = Half-Brain or Split Images'/
      DATA MENU(9)  /'P = Print Current Output File'/
      DATA MENU(10) /'W = Save Screen Image as Window Dump'/
      DATA MENU(11) /'0 = Refresh Ramtek Screen'/
      DATA MENU(12) /'X = Exit'/
      DATA MENUSET  /'DCSURAGHPW0Xdcsuraghpwx'/
      DATA OUTFILE  /'PRINTER'/
      DATA CLEAR    /'                                        '/
C
      DATA ROWCH, COLCH, WARNLINE /22, 20, 24/
C
C     Get the command line arguments.
C
      CALL GETARG (1, LIBPATH)
      CALL GETARG (2, PCSTR)
      IF (PCSTR .EQ. "-pc") THEN
	PCFLAG = 1
      ELSE
	PCFLAG = 0
      ENDIF
C
C  Read default volume name for .IMG and .HDR files
C    and remove the colon if present
C
      CALL GETUSER (USERNAME) 
      TPLTFILE = '/tmp/SPIDTPLT.'//USERNAME
      L = INANYR (LIBPATH, ' ')
      OPEN (TDISK, FILE = TPLTFILE)
      OPEN (STDISK, FILE = LIBPATH (1:L)//'/SPIDTP40.49')
C
C  Initialize variables
C
      CALL M2INIT
C
C  Get terminal type for terminal control subroutines
C
      CALL TERMSET (AUXLU, LIBPATH)
C
C  Set planes for regions, coronal & mid-lines, statistics.
C    (color tables for images uses 1-256 and 300-500;
C     overlay planes are 2**10 and 2**12 on RASPUTIN
C     and 2**12 and 2**13 on all other Ramteks,
C     but overlay plane white is ~90% of brightest image white)
C
      ZORIGIN  = 31
      TEMPLANE = 2**12
      REGPLANE = 2**11
      FIXPLANE = 2**12 - 1
C
C  Initialize the Ramtek
C
      CALL RAMINI (0, 20, 1200, 1000, 40, PCFLAG, LIBPATH)
      CALL RAMRST (RMD)
C
C  Clear the screen and write the menu
C
8080  FORMAT (20X, A40)
8081  FORMAT (27X, '{', A21, '}')
8082  FORMAT (33X, '{', A9, '}')
8083  FORMAT (19X, A43)
8084  FORMAT (11X, A58)
8090  FORMAT(27X,A40)
C
100   CALL TCONTROL (1, 0, 0)
      CALL TCONTROL (2, 0, 0)
      WRITE (USEROUT, 8080) TITLE (1)
      WRITE (USEROUT, 8080) TITLE (2)
      WRITE (USEROUT, *) 
      IF (PCFLAG .EQ. 1) THEN
        WRITE (USEROUT, 8081) 'pcspideram, 17-Jun-94'
      ELSE
        WRITE (USEROUT, 8082) VERSION
      ENDIF
      WRITE (USEROUT, *)
      WRITE (USEROUT, 8083) COPYRGHT (1)
      WRITE (USEROUT, 8084) COPYRGHT (2)
      WRITE (USEROUT, *) 
      DO 120 I = 1, 12
	WRITE (USEROUT, 8090) MENU(I)
120   CONTINUE
C
      CALL CLEANUP (TPLTFILE) 
C  Get user's request
C
200   CALL CHFIELD (CH, MENUSET, ROWCH, COLCH, WARNLINE)
C
      IF (CH .EQ. 'D' .OR. CH .EQ. 'd') THEN
        CALL M2DISPLA
      ELSE IF (CH .EQ. 'C' .OR. CH .EQ. 'c') THEN
        CALL M2SCALE (LIBPATH)
      ELSE IF (CH .EQ. 'S' .OR. CH .EQ. 's') THEN
        CALL M2FILES
      ELSE IF (CH.EQ.'U' .OR. CH.EQ.'u') THEN
300	CALL WRTFIELD ('Path for image files', 20, ROWCH, 1)
	CALL ERSFIELD (80, ROWCH + 1, 1)
	CALL INFIELD (IMGVOL, 80, ROWCH + 1, 1, NEXT)
	L1 = IANYR (IMGVOL, '/')
	L2 = INANYR (IMGVOL, ' ')
	IF (L1 .LT. L2 .AND. L2 .LT. 80) THEN
	  IMGVOL (L2+1:L2+1) = '/'
	  L = L2 + 1
	ELSE
	  L = L2
	ENDIF
	PATHOK = .TRUE.
	IF (L .GT. 0) THEN
	  TMPPATH = CLEAR//CLEAR
          TMPPATH = IMGVOL (1:L)
	  TMPPATH (L+1:L+1) = '.'
	  CALL CHKPATH (TMPPATH, L + 1, PATHOK)
	ENDIF
	IF (PATHOK .EQ. .FALSE.) THEN
	  WRITE (USEROUT, *) CHAR (7) 
	  CALL WRTFIELD ('*** ERROR -- Image path does not exist! ***',
     2		43, WARNLINE, 1)
          GO TO 300
	ELSE
	  CALL ERSFIELD (43, WARNLINE, 1)
	ENDIF
C
400	CALL WRTFIELD ('Path for HDR files', 18, ROWCH + 2, 1)
	CALL ERSFIELD (80, ROWCH + 3, 1)
	CALL INFIELD (HDRVOL, 80, ROWCH + 3, 1, NEXT)
	L1 = IANYR (HDRVOL, '/')
	L2 = INANYR (HDRVOL, ' ')
	IF (L1 .LT. L2 .AND. L2 .LT. 80) THEN
	  HDRVOL (L2+1:L2+1) = '/'
	  L = L2 + 1
	ELSE
	  L = L2
        ENDIF
	PATHOK = .TRUE.
	IF (L .GT. 0) THEN
	  TMPPATH = CLEAR//CLEAR
          TMPPATH = HDRVOL (1:L)
	  TMPPATH (L+1:L+1) = '.'
	  CALL CHKPATH (TMPPATH, L + 1, PATHOK)
	ENDIF
        IF (PATHOK .EQ. .FALSE.) THEN 
	  WRITE (USEROUT, *) CHAR (7) 
	  CALL WRTFIELD ('*** ERROR -- Header path does not exist! ***',
     2		44, WARNLINE, 1)
          GO TO 400
	ELSE
	  CALL ERSFIELD (44, WARNLINE, 1)
	ENDIF
C     ELSE IF (CH.EQ.'F' .OR. CH.EQ.'f') THEN
C       CALL M2FASTF
      ELSE IF (CH.EQ.'R' .OR. CH.EQ.'r') THEN
        CALL M2REGION
      ELSE IF (CH.EQ.'A' .OR. CH.EQ.'a') THEN
        CALL M2ANALYZ
      ELSE IF (CH.EQ.'G' .OR. CH.EQ.'g') THEN
        CALL M2GLOBAL
      ELSE IF (CH.EQ.'H' .OR. CH.EQ.'h') THEN
        CALL M2SPLIT
      ELSE IF (CH.EQ.'P' .OR. CH.EQ.'p') THEN
	INQUIRE (PRINTER, OPENED = PRINTON)
	IF (PRINTON) CLOSE (PRINTER)
	CALL PRNTFILE (OUTFILE)
      ELSE IF (CH .EQ. 'W' .OR. CH .EQ. 'w') THEN
	CALL WRTFIELD ('Window dump file name', 21, ROWCH, 1)
	CALL ERSFIELD (40, ROWCH + 1, 1)
	CALL INFIELD (DUMPNAME, 40, ROWCH + 1, 1, NEXT)
	L1 = INANYR (DUMPNAME, ' ')
	IF (IANYR (DUMPNAME, ".xwd") .NE. L1 .AND.
     &	  IANYR (DUMPNAME, ".XWD") .NE. L1) THEN
	  XWDEXT = .FALSE.
	  L2 = L1 + 4
        ELSE
	  XWDEXT = .TRUE.
	  L2 = L1
	ENDIF
	IF (XWDEXT .EQ. .FALSE.) THEN
		DUMPNAME(L1+1:L1+4) = '.xwd'
	ENDIF
        CALL WRTFIELD ('Make sure the part of the window '//
     &	 'you want to save is viewable.', 62, ROWCH + 2, 1)
        CALL WRTFIELD ('After you are ready, press the '//
     &   	'key s or S to save.', 50, ROWCH + 3, 1)
C
C     Check the keyboard until 's' or 'S' is keyed in.
C
	XWDFLAG = .FALSE.
700     CALL XWDCHCK (XWDFLAG)
        IF (.NOT. XWDFLAG) GO TO 700
C
        CALL WINDUMP (.FALSE., 0, 0, 0, 0, DUMPNAME, L2)
      ELSE IF (CH .EQ. '0') THEN
        CALL RAMRST (RMD)
      ELSE IF (CH .EQ. 'X' .OR. CH .EQ. 'x') THEN
        Q = 'EXIT?'
        CALL QUERY(Q,A,ROWCH,COLCH)
        CALL ERSFIELD(10,ROWCH,COLCH)
        IF (A) THEN
	  CLOSE (TDISK)
	  CLOSE (STDISK)
	  RMFILE = 1
          CALL XRAMEXIT ("rm " // TPLTFILE, RMFILE)
          STOP
        ELSE
          GO TO 200
        END IF
      ELSE
        GO TO 200
      END IF
      GO TO 100
C
      END
@


1.45
log
@Use initial slice and number of slices for GBA.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.44 1994/08/16 16:37:01 tom Exp ty7777 $
d3 3
d337 1
a337 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.44 1994/08/16 16:37:01 tom Exp ty7777 $"
d347 1
a347 1
      DATA VERSION  /'16-Aug-94'/
@


1.44
log
@Modified a2save.f to use lowercase "rgt" and to close file after write.
@
text
@d1 1
a1 1
C $Header: /home/npggw/tom/src/spideram/src/RCS/main.f,v 1.43 1994/06/17 21:30:56 ty7777 Exp tom $
d3 3
d265 6
d334 1
a334 1
      rcsheader = "$Header: /home/npggw/tom/src/spideram/src/RCS/main.f,v 1.43 1994/06/17 21:30:56 ty7777 Exp tom $"
@


1.43
log
@Added message for PC display.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.42 1994/06/17 21:17:46 ty7777 Exp ty7777 $
d3 3
d259 3
d325 1
a325 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.42 1994/06/17 21:17:46 ty7777 Exp ty7777 $"
d335 1
a335 1
      DATA VERSION  /'17-Jun-94'/
@


1.42
log
@Change the date format for pc screen.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.41 1994/06/16 21:00:59 ty7777 Exp ty7777 $
d3 3
d319 1
a319 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.41 1994/06/16 21:00:59 ty7777 Exp ty7777 $"
d329 1
a329 1
      DATA VERSION  /'16-Jun-94'/
a355 1
	VERSION = 'pcspideram 16-Jun-94'
d396 1
a396 1
8081  FORMAT (27X, '{', A20, '}')
d408 1
a408 1
        WRITE (USEROUT, 8081) VERSION
@


1.41
log
@The current version works on both the Workstation and the PCs.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.40 1994/06/14 15:57:23 ty7777 Exp ty7777 $
d3 3
d316 1
a316 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.40 1994/06/14 15:57:23 ty7777 Exp ty7777 $"
d353 1
d393 3
a395 3
8080  FORMAT(20X,A40)
8081  FORMAT(20X,A40)
8082  FORMAT(33X,'{',A9,'}')
d403 1
a403 1
      WRITE (USEROUT, 8081) TITLE (2)
d405 5
a409 1
      WRITE (USEROUT, 8082) VERSION
@


1.40
log
@Move down the save window dump menu.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.39 1994/06/10 15:06:46 ty7777 Exp ty7777 $
d3 3
d248 2
d284 13
a296 6
      INTEGER*4    AUXLU       ! log unit containing the terminal type
      INTEGER*4    VOLLU       ! log unit containing default volume names
      INTEGER*4    ROWCH,COLCH ! location of the field for entering CH
      INTEGER*4    WARNLINE    ! line no. to write warning messages on
      INTEGER*4    L1,L2,L
      INTEGER*4    RMFILE
d298 6
a303 11
      CHARACTER*1  CH          ! input character for selecting a menu option
      CHARACTER*80 TITLE(2)    ! menu title
      CHARACTER*80 COPYRGHT(2) ! copyright message
      CHARACTER*80 MENU(12)    ! menu options
      CHARACTER*80 MENUSET     ! set of characters allowed for menu options
      CHARACTER*80 Q           ! query to user
      CHARACTER*30 USERNAME    ! user name
      CHARACTER*80 TPLTFILE    ! template file name
      CHARACTER*80 TMPPATH     ! template path name
      CHARACTER*40 CLEAR       ! used to clear a string 
			character*256 rcsheader
d305 6
a310 6
      LOGICAL*1    A           ! answer
      LOGICAL*1    NEXT
      LOGICAL*1    PRINTON     
      LOGICAL*1    PATHOK     
      LOGICAL*1    XWDEXT     
      LOGICAL*1    XWDFLAG     
d313 1
a313 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.39 1994/06/10 15:06:46 ty7777 Exp ty7777 $"
d318 1
a318 1
      DATA AUXLU,VOLLU  /1,2/
d344 10
d359 1
d361 1
a361 1
      OPEN (STDISK, FILE = '/usr/local/lib/spideram/SPIDTP40.49')
d369 1
a369 1
      CALL TERMSET(AUXLU)
d384 1
a384 1
      CALL RAMINI (0, 20, 1200, 1000, 40, 0, RMD)
d415 1
a415 1
      IF (CH.EQ.'D' .OR. CH.EQ.'d') THEN
d417 3
a419 3
      ELSE IF (CH.EQ.'C' .OR. CH.EQ.'c') THEN
        CALL M2SCALE
      ELSE IF (CH.EQ.'S' .OR. CH.EQ.'s') THEN
d517 1
a517 1
      ELSE IF (CH.EQ.'0') THEN
d519 1
a519 1
      ELSE IF (CH.EQ.'X' .OR. CH.EQ.'x') THEN
@


1.39
log
@Use the PCFLAG in ramimg ().
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.38 1994/06/06 17:56:35 ty7777 Exp ty7777 $
d3 3
d244 1
d306 1
a306 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.38 1994/06/06 17:56:35 ty7777 Exp ty7777 $"
d316 1
a316 1
      DATA VERSION  /'10-Jun-94'/
d471 4
a474 4
      ELSE IF (CH.EQ.'W' .OR. CH.EQ.'w') THEN
	CALL WRTFIELD ('Window dump file name',21,18,1)
	CALL ERSFIELD (40,19,1)
	CALL INFIELD (DUMPNAME,40,19,1,NEXT)
d488 1
a488 1
     &	 'you want to save is viewable.', 62, 20, 1)
d490 1
a490 1
     &   	'key s or S to save.', 50, 21, 1)
d496 1
a496 1
        IF (.NOT.XWDFLAG) GO TO 700
@


1.38
log
@Correct the date.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.37 1994/06/06 17:07:54 ty7777 Exp ty7777 $
d3 3
d239 2
a240 1
C     Modified by Tom Yang on 06-June-94 to rdd arguments for RAMINI.
d302 1
a302 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.37 1994/06/06 17:07:54 ty7777 Exp ty7777 $"
d312 1
a312 1
      DATA VERSION  /'06-Jun-94'/
d362 1
a362 1
      CALL RAMINI (0, 20, 1200, 1000, 40)
@


1.37
log
@Update the date.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.36 1994/06/06 17:00:49 ty7777 Exp ty7777 $
d3 3
d298 1
a298 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.36 1994/06/06 17:00:49 ty7777 Exp ty7777 $"
d308 1
a308 1
      DATA VERSION  /'06-June-94'/
@


1.36
log
@Added arguments for ramini ().
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.35 1994/05/25 20:17:47 ty7777 Exp ty7777 $
d3 3
d295 1
a295 1
      rcsheader = "$Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.35 1994/05/25 20:17:47 ty7777 Exp ty7777 $"
d305 1
a305 1
      DATA VERSION  /'25-May-94'/
@


1.35
log
@Modified to read reg files generated from locate.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.34 1994/05/02 16:40:18 ty7777 Exp ty7777 $
d3 3
d230 1
d292 1
a292 1
      rcsheader = "$Header$"
d352 1
a352 1
      CALL RAMINI (40)
@


1.34
log
@Added initialization for the zorigin.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.33 1994/02/08 20:32:56 ty7777 Exp ty7777 $
d3 3
d225 2
d288 1
a288 1
      rcsheader = "$Id: main.f,v 1.33 1994/02/08 20:32:56 ty7777 Exp ty7777 $"
d298 1
a298 1
      DATA VERSION  /'08-Feb-94'/
@


1.33
log
@Fixing the color bar display problem in half brain.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.32 1994/01/27 16:10:44 ty7777 Exp ty7777 $
d3 3
d283 1
a283 1
      rcsheader = "$Id: main.f,v 1.32 1994/01/27 16:10:44 ty7777 Exp ty7777 $"
d336 1
@


1.32
log
@Changed the Unix path input place.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.31 1994/01/21 18:40:37 ty7777 Exp ty7777 $
d3 3
d218 1
d280 1
a280 1
      rcsheader = "$Id: main.f,v 1.31 1994/01/21 18:40:37 ty7777 Exp ty7777 $"
d290 1
a290 1
      DATA VERSION  /'21-Jan-94'/
@


1.31
log
@Added copyright.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.30 1994/01/21 18:20:15 ty7777 Exp ty7777 $
d3 3
d276 1
a276 1
      rcsheader = "$Id: main.f,v 1.30 1994/01/21 18:20:15 ty7777 Exp ty7777 $"
d373 3
a375 3
300	CALL WRTFIELD ('Path for image files', 20, 18, 1)
	CALL ERSFIELD(80,19,1)
	CALL INFIELD(IMGVOL,80,19,1,NEXT)
d400 3
a402 3
400	CALL WRTFIELD ('Path for HDR files', 18, 20, 1)
	CALL ERSFIELD(80,21,1)
	CALL INFIELD(HDRVOL,80,21,1,NEXT)
@


1.30
log
@Added the copyright message.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.29 1994/01/14 19:22:22 ty7777 Exp ty7777 $
d3 3
d255 1
d273 1
a273 1
      rcsheader = "$Id: main.f,v 1.29 1994/01/14 19:22:22 ty7777 Exp ty7777 $"
d283 3
a285 1
      DATA VERSION  /'14-Jan-94'/
d340 2
d344 4
a347 4
100   CALL TCONTROL(1,0,0)
      CALL TCONTROL(2,0,0)
      WRITE (USEROUT,8080) TITLE(1)
      WRITE (USEROUT,8081) TITLE(2)
d349 1
a349 1
      WRITE (USEROUT,8082) VERSION
d351 2
a352 2
      WRITE (USEROUT, *) 'Copyright 1991-1994, Washington University.'
      WRITE (USEROUT, *) 'All rights reserved. Unauthorized reproduction prohibited.'
@


1.29
log
@Added processing for images with more than 49 slices.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.28 1994/01/07 20:50:26 ty7777 Exp ty7777 $
d3 3
d208 1
d269 1
a269 1
			rcsheader = "$Id: main.f,v 1.28 1994/01/07 20:50:26 ty7777 Exp ty7777 $"
d296 1
a296 1
      DATA ROWCH, COLCH, WARNLINE /19, 20, 24/
d340 1
a340 1
      WRITE (USEROUT,*) ' '
d342 4
a345 1
      WRITE (USEROUT,*) ' '
d353 1
a353 1
200   CALL CHFIELD(CH,MENUSET,ROWCH,COLCH,WARNLINE)
@


1.28
log
@Change the date.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.27 1994/01/07 20:49:30 ty7777 Exp ty7777 $
d3 3
d202 3
d265 1
a265 1
			rcsheader = "$Id: main.f,v 1.27 1994/01/07 20:49:30 ty7777 Exp ty7777 $"
d275 1
a275 1
      DATA VERSION  /'07-Jan-94'/
@


1.27
log
@Adding template for images with more than 49 slices.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.26 1993/11/24 20:31:25 ty7777 Exp ty7777 $
d3 3
d259 1
a259 1
			rcsheader = "$Id: main.f,v 1.26 1993/11/24 20:31:25 ty7777 Exp ty7777 $"
d269 1
a269 1
      DATA VERSION  /'23-Nov-93'/
@


1.26
log
@RAMINI is changed.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.25 1993/11/24 17:30:54 ty7777 Exp ty7777 $
d3 3
d193 3
d256 1
a256 1
			rcsheader = "$Id: main.f,v 1.25 1993/11/24 17:30:54 ty7777 Exp ty7777 $"
d448 2
@


1.25
log
@Added RMFILE to XRAMEXIT.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.24 1993/11/18 20:11:57 ty7777 Exp ty7777 $
d3 3
d188 2
a189 2
C        XRAMEXIT is changed in libpe.a and an extra argument is added
C        as a flag.
d250 1
a250 1
			rcsheader = "$Id: main.f,v 1.24 1993/11/18 20:11:57 ty7777 Exp ty7777 $"
d307 2
a308 2
      CALL RAMINI(RMD)
      CALL RAMRST(RMD)
@


1.24
log
@Changed region extension.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.23 1993/11/18 20:04:30 ty7777 Exp ty7777 $
d3 3
d184 3
d226 1
d247 1
a247 1
			rcsheader = "$Id: main.f,v 1.23 1993/11/18 20:04:30 ty7777 Exp ty7777 $"
d257 1
a257 1
      DATA VERSION  /'18-Nov-93'/
d439 2
a440 1
          CALL XRAMEXIT ("rm " // TPLTFILE)
@


1.23
log
@libpe.a is changed to process the ButtonRelease signal.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/spideram/RCS/main.f,v 1.22 1993/10/05 21:20:50 tom Exp ty7777 $
d3 3
d179 2
a180 1
C        Added the button release signal.
d240 1
a240 1
			rcsheader = "$Id: main.f,v 1.22 1993/10/05 21:20:50 tom Exp ty7777 $"
@


1.22
log
@new version for x-reversed ecat images
@
text
@d1 1
a1 1
C $Header: /home/petsun2/tom/src/spideram/src/RCS/main.f,v 1.21 1993/10/04 21:55:32 tom Exp $
d3 3
d155 3
a157 3
C			   1) use standard library functions from libpetutil.
C				(getuimage.f)
C			   2) read ECAT images (getuimage.f).
d159 1
a159 1
C                          1) process ECAT images (d2getimg.f).
d161 1
a161 1
C                          Changed processing for ECAT attenuation images.
d163 1
a163 1
C                          Display ECAT transmission images.
d165 1
a165 1
C                          Replace CTOI with NEWCTOI in m2global.f, m2split.
d167 1
a167 1
C                          Changed scaling factor of ECAT image to 1.0.
d169 1
a169 1
C                          Read .hdr or .HDR header files (d2getimg.f).
d171 6
a176 4
C                          Save and get regions on an ECAT image (r2get.f, r2save.f). 
C			Modified by TOV:
C				1) process NTYPE = 11 and 12
C				2) add rcsheader to all modules
d236 1
a236 1
			rcsheader = "$Id: main.f,v 1.21 1993/10/04 21:55:32 tom Exp $"
d246 1
a246 1
      DATA VERSION  /'05-Oct-93'/
@


1.21
log
@added ability to display ntype = 11 or 12 (oef and cmro2 from t88mean)
@
text
@d1 1
a1 1
C $Header: /export/home/petsun2/tom/src/spideram/src/RCS/main.f,v 1.20 1993/07/14 18:50:40 ty7777 Exp tom $
d3 3
d169 3
d231 1
a231 1
			rcsheader = "$Id$"
d241 1
a241 1
      DATA VERSION  /'22-Sep-93'/
@


1.20
log
@Rebuilt with new libraries libpetutil.a. Use default ecat_calibration_fctr
if the one in the image_subheader is 0.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram/RCS/main.f,v 1.19 1993/07/12 21:20:26 tom Exp ty7777 $
d3 4
d215 1
d225 1
d235 1
a235 1
      DATA VERSION  /'14-Jul-93'/
@


1.19
log
@Rebuilt with new libpetutil:
pixel value = pixel * quant_factor * frame_duration * ecat_calibration_fctr
@
text
@d1 1
a1 1
C $Header: /home/petsun2/tom/src/spideram/RCS/main.f,v 1.18 1993/03/04 16:30:25 ty7777 Exp tom $
d3 4
d229 1
a229 1
      DATA VERSION  /'12-Jul-93'/
@


1.18
log
@Before moving to HP machines.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram/RCS/main.f,v 1.17 1992/12/08 21:10:12 ty7777 Exp ty7777 $
d3 3
d225 1
a225 1
      DATA VERSION  /'29-Dec-92'/
@


1.17
log
@Before calling libcti library.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram/RCS/main.f,v 1.16 1992/10/21 16:14:22 ty7777 Exp $
d3 3
d153 2
d222 1
a222 1
      DATA VERSION  /'28-Oct-92'/
@


1.16
log
@Changed scaling factor of ECAT images to 1.0.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram/RCS/main.f,v 1.15 1992/10/13 19:47:34 ty7777 Exp ty7777 $
d3 3
d148 2
d217 1
a217 1
      DATA VERSION  /'21-Oct-92'/
@


1.15
log
@Replace CTOI with NEWCTOI.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram/RCS/main.f,v 1.14 1992/10/08 15:49:24 ty7777 Exp ty7777 $
d3 3
d143 2
d212 1
a212 1
      DATA VERSION  /'12-Oct-92'/
@


1.14
log
@Before libpetutil library changed.
@
text
@d1 1
a1 1
C $Header: /home/petsun4/ty7777/src/xspideram.d/RCS/main.f,v 1.13 1992/08/21 20:15:51 ty7777 Exp $
d3 3
d138 2
a188 1
      CHARACTER*100 RCSHEADER
d207 1
a207 1
      DATA VERSION  /'06-Oct-92'/
a227 1
      RCSHEADER = "$Header$"
@


1.13
log
@Testing RCS checking in.
@
text
@d1 1
a1 1
C $Header$
d3 3
d131 4
d184 1
d203 1
a203 1
      DATA VERSION  /'20-Aug-92'/
d220 1
a220 1
      DATA ROWCH,COLCH,WARNLINE /19,20,24/
d224 1
@


1.12
log
@After fixing ECAT number of slices bug.
@
text
@d1 5
a5 1
C $Log$
a161 1
      CHARACTER*100 RCSHEADER
a212 2
C
      RCSHEADER = "$Header$"
@


1.11
log
@Changed Date to 04/30/92.
@
text
@d1 1
d158 1
d192 1
a192 1
      DATA VERSION  /'30-Apr-92'/
d210 2
@


1.10
log
@Process ECAT images.
@
text
@d190 1
a190 1
      DATA VERSION  /'28-Apr-92'/
@


1.9
log
@Read ECAT images and use library functiuons from libpetutil.a
@
text
@d119 4
a122 1
C			   2) read ECAT images.
d190 1
a190 1
      DATA VERSION  /'27-Apr-92'/
@


1.8
log
@Save window dump. 04/23/92 by Tom Yang
@
text
@d117 3
d187 1
a187 1
      DATA VERSION  /'20-Apr-92'/
@


1.7
log
@*** empty log message ***
@
text
@d114 1
a114 1
C        ramtek screen as window dump files (main.f, ramtek/cramtek.c). 
@


1.6
log
@*** empty log message ***
@
text
@d114 1
a114 1
C        ramtek screen as window dump files. 
@


1.5
log
@*** empty log message ***
@
text
@@


1.4
log
@*** empty log message ***
@
text
@@


1.3
log
@Templates for all 49 slices.
@
text
@@


1.2
log
@14-Apr-92 TOV
Allow templates to be created on 49-slice images.
@
text
@d113 2
d159 1
a159 1
      CHARACTER*80 MENU(11)    ! menu options
d171 2
d184 1
a184 1
      DATA VERSION  /'14-Apr-92'/
d194 4
a197 3
      DATA MENU(10) /'0 = Refresh Ramtek Screen'/
      DATA MENU(11) /'X = Exit'/
      DATA MENUSET  /'DCSURAGHP0Xdcsuraghpx'/
d248 1
a248 1
      DO 120 I = 1, 11
d331 28
@


1.1
log
@Initial revision
@
text
@d113 2
d180 1
a180 1
      DATA VERSION  /'25-Nov-91'/
@
