<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>flirt: Image.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">home</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">ens</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">flirtproj</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">flirt++</a></div>
<h1>Image.cc</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#include "Image.h"</span>
00002 <span class="preprocessor">#include "<a class="code" href="_array_8h.html">Array.h</a>"</span>
00003 
00004 <span class="keyword">namespace </span>flirt {
00005 
00006 <span class="comment">// ----------------------------------------------------------------------------</span>
00007 
<a name="l00008"></a><a class="code" href="classflirt_1_1_image.html#a1">00008</a> Image :: Image(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_image.html">Image</a>&amp; I)
00009   : <a class="code" href="classflirt_1_1_array.html">Array</a>(I) {
00010   <span class="comment">//printf("Constructor Image(const Image&amp;)\n");</span>
00011   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];
00012   h[0] = I.h[0];
00013   h[1] = I.h[1];
00014 };
00015 
00016 
00017 <span class="comment">// --------------------------------------------------------------------</span>
00018 
<a name="l00019"></a><a class="code" href="classflirt_1_1_image.html#a3">00019</a> <span class="keyword">const</span> <span class="keywordtype">double</span>* Image :: getVoxelSize()<span class="keyword"> const </span>{
00020     <span class="keywordflow">return</span> h;
00021 };
00022 
00023 
00024 <span class="comment">// --------------------------------------------------------------------</span>
00025 <span class="comment">// Image 2D</span>
00026 <span class="comment">// --------------------------------------------------------------------</span>
00027 
00028 Image2D :: Image2D(<span class="keywordtype">int</span> m1, <span class="keywordtype">int</span> m2, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2)
00029   : <a class="code" href="classflirt_1_1_array.html">Array</a>(m1, m2),  <a class="code" href="classflirt_1_1_array2_d.html">Array2D</a>(m1, m2) {
00030   <span class="comment">//printf("Constructor Image2D( int, int, double, double)\n\n");</span>
00031   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];
00032   h[0] = h1;
00033   h[1] = h2;
00034 
00035 
00036 };
00037 
00038 <span class="comment">// ----------------------------------------------------------------------------</span>
00039 
00040 Image2D :: Image2D( <span class="keywordtype">int</span>* _dims, <span class="keywordtype">double</span>* _h) 
00041   : Array2D(_dims[0], _dims[1]) {
00042   <span class="comment">//printf("Constructor Image2D(int*, double*)\n\n");</span>
00043   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];
00044   h[0] = _h[0];
00045   h[1] = _h[1];
00046 };
00047 
00048 <span class="comment">// --------------------------------------------------------------------</span>
00049 
<a name="l00050"></a><a class="code" href="classflirt_1_1_image2_d.html#a3">00050</a> Image2D :: Image2D( <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2) { 
00051   <span class="comment">//printf("Image2D :: Image2D( char*, double, double)\n\n");</span>
00052   <span class="keywordtype">int</span> m1, m2;
00053   readTIFFsize( name, &amp;m1, &amp;m2); 
00054  
00055   ndims = 2;
00056   dims = <span class="keyword">new</span> <span class="keywordtype">int</span>[2];
00057   dims[0] = m1;
00058   dims[1] = m2;
00059   nelem = m1*m2;
00060   data = <span class="keyword">new</span> <span class="keywordtype">double</span>[nelem];
00061   A = createTreeStructure2D( m1, m2, data);
00062   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];
00063   h[0] = h1;
00064   h[1] = h2;
00065   readTIFF( name, A, m1, m2); 
00066 }
00067 
00068 
00069 
00070 <span class="comment">// ----------------------------------------------------------------------------</span>
00071 
<a name="l00072"></a><a class="code" href="classflirt_1_1_image2_d.html#a4">00072</a> Image2D :: Image2D(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_image2_d.html">Image2D</a>&amp; I2)
00073   : <a class="code" href="classflirt_1_1_array.html">Array</a>(I2) {
00074   <span class="comment">//printf("Constructor: Image2D( const Image2D&amp;)\n\n");</span>
00075   A = createTreeStructure2D(dims[0], dims[1],data);
00076   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[2];
00077   h[0] = I2.h[0];
00078   h[1] = I2.h[1];
00079 };
00080 
00081 <span class="comment">// --------------------------------------------------------------------</span>
00082 
<a name="l00083"></a><a class="code" href="classflirt_1_1_image2_d.html#a7">00083</a> <span class="keywordtype">void</span> Image2D :: writeToTiff( <span class="keywordtype">char</span> *name)<span class="keyword"> const </span>{
00084     writeTIFF(name, A, dims[0], dims[1]);
00085 };
00086 
00087 
00088 <span class="comment">// --------------------------------------------------------------------</span>
00089 <span class="comment">// TransformableImage2D</span>
00090 <span class="comment">// --------------------------------------------------------------------</span>
00091 
<a name="l00092"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a0">00092</a> TransformableImage2D :: TransformableImage2D()
00093   :<a class="code" href="classflirt_1_1_image2_d.html">Image2D</a>(), transformedImage(), transformedGradient() {
00094   <span class="comment">//printf("Constructor TransformableImage2D()\n\n");</span>
00095 };
00096 
00097 
00098 
00099 TransformableImage2D :: TransformableImage2D( <span class="keywordtype">int</span> m1, <span class="keywordtype">int</span> m2, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2)
00100   :<a class="code" href="classflirt_1_1_array.html">Array</a>( m1, m2), <a class="code" href="classflirt_1_1_image2_d.html">Image2D</a>( m1, m2, h1, h2), transformedImage( m1, m2), transformedGradient( 2,m1,m2) {
00101   <span class="comment">//printf("Constructor TransformableImage2D( int, int, double, double)\n\n"); </span>
00102 
00103 };
00104 
00105 <span class="comment">// --------------------------------------------------------------------</span>
00106 
<a name="l00107"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a2">00107</a>   TransformableImage2D :: TransformableImage2D( <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2) 
00108     : <a class="code" href="classflirt_1_1_image2_d.html">Image2D</a>( name, h1, h2), transformedImage( dims[0], dims[1]), transformedGradient( 2, dims[0], dims[1]) {
00109     <span class="comment">//printf("Constructor TransformableImage2D( char*, double, double)\n\n");</span>
00110  
00111 }
00112 
00113 <span class="comment">// ----------------------------------------------------------------------------</span>
00114 
00115 
<a name="l00116"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a3">00116</a>   TransformableImage2D :: TransformableImage2D( <span class="keyword">const</span> <a class="code" href="classflirt_1_1_transformable_image2_d.html">TransformableImage2D</a>&amp; T2)
00117     : <a class="code" href="classflirt_1_1_array.html">Array</a>( T2), <a class="code" href="classflirt_1_1_image2_d.html">Image2D</a>( T2), transformedGradient( 2, T2.getDimensions()[0], T2.getDimensions()[1]) {
00118     <span class="comment">//printf("Constructor TransformableImage2D( const TransformalbeImage2D&amp;)\n\n"); </span>
00119   
00120 };
00121 
00122 <span class="comment">// --------------------------------------------------------------------</span>
00123 
<a name="l00124"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a6">00124</a> <span class="keywordtype">void</span> TransformableImage2D :: transformImage(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_displacement.html">Displacement</a>&amp; u) {
00125     <span class="comment">// test auf u == Displacement</span>
00126     <a class="code" href="classflirt_1_1_displacement2_d.html">Displacement2D</a>&amp; u2D = (<a class="code" href="classflirt_1_1_displacement2_d.html">Displacement2D</a>&amp;) u;
00127     evalDisplacementLinear2D(A,dims[0],dims[1],u2D[0],u2D[1],transformedImage.<a class="code" href="classflirt_1_1_array2_d.html#a7">getArray</a>());
00128 };
00129 
00130 <span class="comment">// --------------------------------------------------------------------</span>
00131 
<a name="l00132"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a7">00132</a> <span class="keywordtype">void</span> TransformableImage2D :: transformGradient(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_displacement.html">Displacement</a>&amp; u) {
00133     <a class="code" href="classflirt_1_1_transformable_image2_d.html#a6">transformImage</a>(u);
00134     computeFDGrad2D(transformedImage.<a class="code" href="classflirt_1_1_array2_d.html#a7">getArray</a>(),dims[0],dims[1],h[0],h[1],<a class="code" href="defs_8h.html#a8a4">NEUMANN</a>,transformedGradient.<a class="code" href="classflirt_1_1_array3_d.html#a6">getArray</a>());
00135 };
00136 
00137 <span class="comment">// --------------------------------------------------------------------</span>
00138 
<a name="l00139"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a8">00139</a> <span class="keywordtype">void</span> TransformableImage2D :: transform(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_displacement.html">Displacement</a>&amp; u) {
00140     <a class="code" href="classflirt_1_1_transformable_image2_d.html#a6">transformImage</a>(u);
00141     computeFDGrad2D(transformedImage.<a class="code" href="classflirt_1_1_array2_d.html#a7">getArray</a>(),dims[0],dims[1],h[0],h[1],<a class="code" href="defs_8h.html#a8a4">NEUMANN</a>,transformedGradient.<a class="code" href="classflirt_1_1_array3_d.html#a6">getArray</a>());
00142 };
00143 
00144 <span class="comment">// --------------------------------------------------------------------</span>
00145 
<a name="l00146"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a9">00146</a> <span class="keyword">const</span> <a class="code" href="classflirt_1_1_array.html">Array</a>&amp; TransformableImage2D :: getTransformedImage()<span class="keyword"> const</span>{
00147     <span class="keywordflow">return</span> transformedImage;
00148 };
00149 
00150 <span class="comment">// --------------------------------------------------------------------</span>
00151 
<a name="l00152"></a><a class="code" href="classflirt_1_1_transformable_image2_d.html#a10">00152</a> <span class="keyword">const</span> <a class="code" href="classflirt_1_1_array.html">Array</a>&amp; TransformableImage2D :: getTransformedGradient()<span class="keyword"> const </span>{
00153     <span class="keywordflow">return</span> transformedGradient;
00154 
00155 };
00156 
00157 <span class="comment">// --------------------------------------------------------------------</span>
00158 
00159 <span class="keywordtype">void</span> TransformableImage2D :: writeTransformedImageToTiff(<span class="keywordtype">char</span> *name) {
00160     writeTIFF(name, transformedImage.<a class="code" href="classflirt_1_1_array2_d.html#a7">getArray</a>(), dims[0], dims[1]);
00161 };
00162 
00163 
00164 <span class="comment">// --------------------------------------------------------------------</span>
00165 <span class="comment">// Image 3D</span>
00166 <span class="comment">// --------------------------------------------------------------------</span>
00167 
00168 Image3D :: Image3D(<span class="keywordtype">int</span> m1, <span class="keywordtype">int</span> m2, <span class="keywordtype">int</span> m3, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2, <span class="keywordtype">double</span> h3)
00169   : Array(m1, m2, m3),  Array3D(m1, m2, m3) {
00170   <span class="comment">//printf("Constructor Image3D( int, int, int, double, double, double)\n\n");</span>
00171   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[3];
00172   h[0] = h1;
00173   h[1] = h2;
00174   h[2] = h3;
00175 };
00176 
00177 <span class="comment">// ----------------------------------------------------------------------------</span>
00178 
00179 Image3D :: Image3D( <span class="keywordtype">int</span>* _dims, <span class="keywordtype">double</span>* _h) 
00180   : Array3D(_dims[0], _dims[1], _dims[2]) {
00181   <span class="comment">//printf("Constructor Image3D(int*, double*)\n\n");</span>
00182   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[3];
00183   h[0] = _h[0];
00184   h[1] = _h[1];
00185   h[2] = _h[2];
00186 };
00187 
00188 <span class="comment">// --------------------------------------------------------------------</span>
00189 
<a name="l00190"></a><a class="code" href="classflirt_1_1_image3_d.html#a3">00190</a> Image3D :: Image3D( <span class="keywordtype">char</span> *name, <span class="keywordtype">double</span> h1, <span class="keywordtype">double</span> h2, <span class="keywordtype">double</span> h3) { 
00191   <span class="comment">//printf("Image3D :: Image3D( char*, double, double, double)\n\n");</span>
00192   <span class="keywordtype">int</span> m1, m2,m3;
00193   
00194   ndims = 3;
00195   dims = <span class="keyword">new</span> <span class="keywordtype">int</span>[3];
00196   dims[0] = m1;
00197   dims[1] = m2;
00198   dims[2] = m3;
00199   nelem = m1*m2*m3;
00200   data = <span class="keyword">new</span> <span class="keywordtype">double</span>[nelem];
00201   A = createTreeStructure3D( m1, m2, m3, data);
00202   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[3];
00203   h[0] = h1;
00204   h[1] = h2;
00205   h[2] = h3;
00206   
00207   <span class="comment">// eigentliches Einlesen muss hier implementiert werden!!!</span>
00208   
00209 };
00210 
00211 
00212 
00213 <span class="comment">// ----------------------------------------------------------------------------</span>
00214 
<a name="l00215"></a><a class="code" href="classflirt_1_1_image3_d.html#a4">00215</a> Image3D :: Image3D(<span class="keyword">const</span> <a class="code" href="classflirt_1_1_image3_d.html">Image3D</a>&amp; I2)
00216   : <a class="code" href="classflirt_1_1_array.html">Array</a>(I2) {
00217   <span class="comment">//printf("Constructor: Image2D( const Image2D&amp;)\n\n");</span>
00218   A = createTreeStructure3D(dims[0], dims[1], dims[2], data);
00219   h = <span class="keyword">new</span> <span class="keywordtype">double</span>[3];
00220   h[0] = I2.h[0];
00221   h[1] = I2.h[1];
00222   h[2] = I2.h[2];
00223 };
00224 
00225 <span class="comment">// --------------------------------------------------------------------</span>
00226 
<a name="l00227"></a><a class="code" href="classflirt_1_1_image3_d.html#a7">00227</a> <span class="keywordtype">void</span> Image3D :: writeToFile( <span class="keywordtype">char</span> *name)<span class="keyword"> const </span>{
00228         printf(<span class="stringliteral">"Image3D::wirteToFile(char *name) not implemented\n"</span>);
00229 };
00230 <span class="comment">// --------------------------------------------------------------------</span>
00231 
<a name="l00232"></a><a class="code" href="classflirt_1_1_image3_d.html#a8">00232</a> <span class="keywordtype">void</span> Image3D :: readFromFile( <span class="keywordtype">char</span> *name)  {
00233         printf(<span class="stringliteral">"Image3D::readFromFile(char *name) not implemented\n"</span>);
00234 };
00235 
00236 } <span class="comment">// namespace</span>
00237 
00238 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jan 10 08:16:41 2006 for flirt by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
