


User Commands                                          VOISTAT(1)



NAME
     voistat - compute mean regional activity for 3D VOIs


SYNOPSIS
     voistat prm lst rgt [voi]

     prm = parameter file (see man prm(5))
     lst = imagelist file (see man imagelist(5))
     rgt = output file
     voi = optional volume-of-interest or region file (see man voi(5) or reg(5))


DESCRIPTION
     voistat computes the mean regional activity for  volumes-of-
     interest (VOI) for all images in an image list.

     All images defined by prmfile and imagelist  must  have  the
     same voxel size and the same number of slices.

     If a voi file is specified on the command line, it  will  be
     used  for all images in the list.  If no voi is specified on
     the command line, the program will look for reg  files  with
     the  same  name as the subject id (i.e., p5000.reg) for each
     image in the list.

     Note: reg files are in the format  output  by  spideram  and
     must  begin  with  the number 20. Voi files have a different
     format and must begin with the number 30 (see man reg(5)  or
     voi(5) for examples). Either type may be used with voistat.

     Images processed as cbf, cbv, oef, cmro2, decay-corrected or
     uncorrected  tissue activity, require hdr files generated by
     metproc or petproc.

     Oxygen processing typically requires 3 images  (oo,  ho  and
     co).  However, if an atlas image was created by another pro-
     gram (t88mean or t88trans) then only this single image  plus
     an  hdr file is necessary. Voistat will perform single-image
     oxygen processing when the hdr file has an ntype > 10.

     If _v_o_i__o_r_d_e_r: is not specified or  if  it  is  0,  then  PET
     images  are  processed  to metabolic images before computing
     regional means.

     If voi_order: 1, then mean regional raw PET counts  will  be
     computed before computing metabolic values.

     If the parameter _v_o_i__n_o_r_m:  is  used,  followed  by  a  real
     number, then the imagelist must contain normalization values
     (i.e., processed by  imgmean).  The  output  means  will  be
     scaled using the ratio of the voi_norm to the imagelist norm



Neuroimaging Lab    Last change: 04-Feb-2000                    1






User Commands                                          VOISTAT(1)



     for each image.  If voi_norm does  not  appear  in  the  prm
     file,  then  normalization  values  need  not  appear in the
     imagelist.

     If the parameter _v_o_i__z_e_r_o__c_h_k: is 'yes', then if  any  pixel
     in  the  volume-of-interest  is 0, the regional mean will be
     -99999.


DEFINING A VOI
     VOI size and shape are defined by the parameter _v_o_i  in  the
     parameter  file while the location of the center of each VOI
     is givin in a separate region file (see voi(5)).

     Currently, 4 VOIs  are  supported:  new_sphere,  old_sphere,
     cylinder,  or cube.  For new_sphere, a single number defines
     its diameter in mm.  For old_sphere, the number defines  its
     transaxial  diameter in mm, however, its axial diameter will
     be the same number of pixels as its transaxial diameter. For
     cubic   voxels   (t88mean   images)  this  is  the  same  as
     new_sphere.

     For a cylinder, two numbers define its diameter  and  height
     in  mm.   For  a  cube,  three  numbers give the x, y, and z
     dimensions in mm.  The location of each VOI is defined in  a
     region file

     All computations use whole pixels so the VOI  specifications
     are  approximate.  If the center of a pixel falls within the
     distance specified, then the entire pixel is  included.  The
     actual number of pixels included and their total volume will
     be written to the output file.

     VOI centers, which are given as real numbers or integers  in
     the  parameter  file,  are also approximate in order to keep
     VOI volume constant for all VOIs. Thus, the center of a  VOI
     may  be  moved up to 1/2 pixel to "center" a VOI rather than
     computing distances from fractional pixels which could  give
     different  volumes  depending on the fractional value of the
     center.

     For a spherical VOI, a voxel is  included  if  the  distance
     between  its center and the VOI center is <= 0.5 * diameter.
     If diameter = 0, the VOI will be exactly 1 voxel.

     For a cubic VOI, a voxel is included if the distance between
     its  center  and the center of the VOI is <= 0.5 * dimension
     for all three dimensions of the cube.


STANDARD VOXEL SIZES
     Our PET images _u_s_u_a_l_l_y have the following dimensions:



Neuroimaging Lab    Last change: 04-Feb-2000                    2






User Commands                                          VOISTAT(1)



         Image Type  Voxel Width & Height   Voxel Depth
         ----------  --------------------   -----------
         ECAT 961        2.086 mm            3.125 mm
         ECAT 953B       2.086 mm            3.375 mm
         PETT VI         2.86  mm           14.4   mm
         t88mean         2.00  mm            2.0   mm
         t88trans        2.00  mm            2.0   mm

     ECAT voxel width and height depend on the zoom  factor  used
     during reconstruction. Use imghdr to check.


EXAMPLE VOIs for ECAT 961:
     voi:  cube 10.5 10.5 1      # 5x5 pixels x 1 plane (25 voxels)
     voi:  cube 10.5 10.5 15.6   # 5x5 pixels x 5 planes (125 voxels)
     voi:  new_sphere 10.4
     voi:  cylinder 75.0 146.8   # 15 cm circle across 47 planes


EXAMPLE VOIs for ECAT 953B:
     voi:  cube 10.5 10.5 1      # 5x5 pixels x 1 plane (25 voxels)
     voi:  cube 10.5 10.5 16.8   # 5x5 pixels x 5 planes (125 voxels)
     voi:  new_sphere 10.4
     voi:  cylinder 75.0 104.6   # 15 cm circle across 31 planes


EXAMPLE VOIs for PETT VI:
     voi:  cube 14.3 14.3 1      # 5x5 pixels x 1 plane (25 voxels)
     voi:  cube 14.3 14.3 43.6   # 5x5 pixels x 3 planes (25 voxels)
     voi:  cylinder 75.0 100.0   # 15 cm circle across 7 planes


OUTPUT
     The actual volume in cc and the total number  of  voxels  it
     contains  are written to the rgtfile.  If _a_n_y voxel of a VOI
     falls outside the image, the VOI mean  will  be  written  as
     -99999.0.


SAMPLE IMAGELIST
     5090    1


SAMPLE VOI
     30     ecat
     insular cortex 4/12/94 wjp
     2
     left-insula     47.5    58.5    16.5
     right-insula    83.5    58.5    16.5






Neuroimaging Lab    Last change: 04-Feb-2000                    3






User Commands                                          VOISTAT(1)



SAMPLE PARAMETER FILE for 2-D 961
     # Required parameters used to determine image filenames
     species:        p
     tracer:         fdg
     extension:      v
     imgfilter:      butterworth 0.5 5

     # Optional parameters used to find images in another path
     datapath:
     scanner:        961
     acquisition:    2d
     reconstruction: filtered_backprojection
     recfilter:      ramp

     # Additional parameters used for processing by voistat
     processing: none         # (none, cbf, cbv, oef, cmro2, uncorrected, decay-corrected)
     imgmode:    standard     # (multitracer)
     voi:        new_sphere 10.4
     voi_norm:   1.0          # optional: default is no normalization
     voi_sd:     yes          # optional: default is no
     voi_order:  1            # optional: default is 0
     voi_zero_chk:  yes       # optional: default is no


TISSUE ACTIVITY PROCESSING
     If voistat is given a dynamic, multi-frame  image  file  and
     processing   is  set  to  either  "uncorrected"  or  "decay-
     corrected", then the output rgt file will contain the  frame
     start  time  in  column  1  and the frame length in column 2
     (both in sec) and the VOI values in the following columns.

     Note that voistat will compute  wellcounts/ml/frame  whereas
     spideram  computes  wellcounts/ml/sec.  Furthermore, whereas
     spideram requires that dynamic files be broken into  single-
     frame  files, each with its own petproc hdr file (from which
     it  uses  either  the  uncorrected  or  decay-corrected  PET
     conversion  factor), voistat requires a single hdr file from
     which it uses only the pieslope (the frame length and  start
     time are read from the image file).


NOTES
     Ignore the Error message for a missing hdr file if  you  are
     processing  images  as counts. Hdr files are always searched
     for even when they are not needed.


SEE ALSO
     prm(5), imagelist(5), voi(5), voiproc(1), vstat(1)






Neuroimaging Lab    Last change: 04-Feb-2000                    4






User Commands                                          VOISTAT(1)



AUTHOR
     Tom O. Videen, 1996-9.





















































Neuroimaging Lab    Last change: 04-Feb-2000                    5



